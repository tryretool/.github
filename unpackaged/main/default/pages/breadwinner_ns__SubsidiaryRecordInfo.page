<apex:page sidebar="false" standardController="breadwinner_ns__BW_Subsidiary__c" extensions="breadwinner_ns.RecordInfoExtension" tabStyle="breadwinner_ns__BW_Subsidiary__c" applyHtmlTag="true" title="{!IF(ISNULL(recordId),'New Subsidiary','Subsidiary: ')} {!sub.Name}">
    <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" lang="en">
        <head>
            <meta charset="utf-8" />
            <meta http-equiv="x-ua-compatible" content="ie=edge" />
            <title>Breadwinner Subsidiary Record</title>
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <apex:slds />
            <apex:variable value="{!OR($User.UIThemeDisplayed == 'Theme4d', $User.UIThemeDisplayed == 'Theme4t')}" var="isLightning" />
            <apex:includeScript value="{!URLFOR($Resource.breadwinner_ns__Breadwinner_for_NetSuite, 'Breadwinner/Scripts/jquery-3.5.1.min.js')}" />
            <script type="text/javascript">
            var j$ = jQuery.noConflict();
            j$(function(){
                message();
                if(document.getElementsByTagName("title") && document.getElementsByTagName("title")[0]){
                    document.getElementsByTagName("title")[0].innerHTML = '{!JSENCODE(recordId)}' == '' ? "New Subsidiary" : "Subsidiary: {!JSENCODE(sub.Name)}";
                }
                if({!JSENCODE(IF(showBWLayout,"true", "false")) == 'true'} && ('{!JSENCODE(recordId)}' != '') && ('{!JSENCODE(sub.Id)}' != '')){
                    showspinner();
                    initializeSubsidiaries();
                }
            });

			function addallstyles(){
                j$(".lookupInput a").removeClass("slds-input");
                message();
            }
            function message(){
                j$(".infoM6, .infoM4, .infoM3, .infoM2, .infoS1").addClass("slds-notify slds-notify_alert slds-theme_inverse-text  slds-text-align_left slds-text-heading_small slds-m-bottom_small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px","background-color":"rgba(84,105,141,.95)","border-color":"rgba(84,105,141,.95)"});
                j$(".errorM6, .errorM4, .errorM3, .errorM2, .errorS1").addClass("slds-notify slds-notify_alert slds-theme_error  slds-text-align_left slds-text-heading_small slds-m-bottom_small").css({"font-weight":"500","line-height":"1.4","word-spacing":"1px","display":"block","border-radius":"5px"});
                j$(".warningM6, .warningM4, .warningM3, .warningM2, .warningS1").addClass("slds-notify slds-notify_alert slds-theme_warning  slds-text-align_left slds-text-heading_small slds-m-bottom_small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px"} ) ;
                j$(".confirmM6, .confirmM4, .confirmM3, .confirmM2, .confirmS1").addClass("slds-notify slds-notify_alert slds-theme_success slds-text-align_left slds-text-heading_small slds-m-bottom_small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px"} ) ;

                j$("div .messageText h4").css( "color", "white" );
                j$("div[class*='warning'] div.messageText h4").css( "color", "black" );
                j$("table.messageTable td").css({"color" : "white"});
                j$("div[class*='warning'] table.messageTable td").css( "color", "black" );
            }

            function reRenderImage(){
                var imageURL = '{!URLFOR($Asset.SLDS, 'assets/icons/custom-sprite/svg/symbols.svg#custom3')}';
                var SVG = j$('<svg/>', {
                    class: 'slds-icon slds-icon slds-page-header__icon',
                });
                var SVGUse = j$('<use/>');
                SVGUse.attr('xlink:href',imageURL);
                j$('.Icon').prepend(SVG.append(SVGUse));
                j$('.Icon' ).html(j$('.Icon').html());
            }

            function showHideSectionConent(sectionId,sectionContentId){
                var sectiondiv=document.getElementById(sectionId);
                j$("#"+sectionContentId).show();
                if(j$(sectiondiv).hasClass("slds-is-open")){
                    j$(sectiondiv).removeClass("slds-is-open");
                }
                else{
                    j$(sectiondiv).addClass("slds-is-open");
                }
            }

            function showspinner(){
                j$('#spinnerId').addClass('slds-show').removeClass('slds-hide');
            }

            function hidespinner(){
                j$('#spinnerId').addClass('slds-hide').removeClass('slds-show');
            }
            function showHidePicklistValues(ele, className){ 
                if (className !== '') j$('.'+className).val('');     
                var accMatchVal = j$('.selectedOrgSFAccountMatchConfig').find('option:selected').text();
                j$('.selectedOrgSFAccountConfig option').each(function() {
                    currentVal = j$(this).text();
                    if(accMatchVal=='Active Companies' && !currentVal.includes('Active')){
                        j$(this).hide();    
                    }
                    else if(accMatchVal.includes('Only Active') && !currentVal.includes(accMatchVal)){
                        j$(this).hide();
                    }
                    else if(accMatchVal.includes('Only Customers') && !currentVal.includes('Customers')){
                        j$(this).hide();
                    }
                    else if(accMatchVal.includes('Only Vendors') && !currentVal.includes('Vendors')){
                        j$(this).hide()
                    }
                    else if(accMatchVal.includes('Do Not') && !currentVal.includes('Do Not')){
                        j$(this).hide()
                    }
                    else{
                        j$(this).show();
                    }
                    if(currentVal.includes('Do Not') || currentVal == '' || accMatchVal == 'All Companies'){
                        j$(this).show();
                    }          
                });
            }

            function identifyfield(elementt, helptext, TopMinusparam,LeftMinusParam) {
                var x = j$(elementt).offset();
                var eleId = console.log(elementt.id);
                var islightningparam='{!isLightning}';
                if(islightningparam=='true'){
                    LeftMinusParam=LeftMinusParam-20;
                    TopMinusparam=TopMinusparam-110;
                }
                var ToSetleft = x.left - LeftMinusParam;
                if(helptext == 'SFAccountConfig') helptext = 'By deafult we create Salesforce Account whenever we find a new NetSuite Company, by setting this to \'Do Not Create\', Breadwinner wouldn\'t create any new Salesforce Accounts for the NetSuite Companies under this Subsidiary.';
                if(helptext == 'SFAccountMatchConfig') helptext = 'By deafult we match Salesforce Account whenever we find a new NetSuite Company, by setting this to \'Do Not Match\', Breadwinner wouldn\'t match any new Salesforce Accounts for the NetSuite Companies under this Subsidiary.';
                j$("#help p").text(helptext);
                var ToSetheight = x.top - TopMinusparam;
                var heptextdiv = document.getElementById("help");
                j$(heptextdiv).css({
                    top: ToSetheight + 'px',
                    left: ToSetleft + 'px',
                    display: ""
                })
            }
            function mouseoutclose() {
                var heptextdiv = document.getElementById("help");
                j$(heptextdiv).css({
                    top: "0px",
                    left: "0px",
                    display: "none"
                });
            }
            function showHideChildSubsidiaries(elmnt){
                var sectiondiv = j$(elmnt).closest('.slds-section').attr("id");
                var imagediv = j$(elmnt).children("img").attr("id");
                if(j$("#"+ sectiondiv).hasClass("slds-is-open")){
                    j$("#"+ sectiondiv + ","+"#"+ sectiondiv +" .slds-section").removeClass("slds-is-open");
                    j$("#"+ sectiondiv+ " .slds-button img").attr("src","{!URLFOR($Resource.Breadwinner_for_NetSuite, 'Breadwinner/Images/chevronright.png')}");
                    j$("#"+ sectiondiv+ " .slds-is-nested").addClass("slds-hide").removeClass("slds-show");
                }
                else{
                    j$("#"+ sectiondiv).addClass("slds-is-open");
                    j$("#"+ sectiondiv).children(".slds-is-nested").addClass("slds-show").removeClass("slds-hide");
                    j$("#"+ imagediv).attr("src","{!URLFOR($Resource.Breadwinner_for_NetSuite, 'Breadwinner/Images/chevrondown.png')}");
                }
            }

            function processSubsidiaries(json){
                if(json == ''){
                    hidespinner();  
                }
                var records = JSON.parse(json);
                var map = {}, node, roots = [], i;
                for (i = 0; i < records.length; i += 1) {
                    map[records[i].internalId] = i;
                    records[i].children = []; 
                }
                for (i = 0; i < records.length; i += 1) {
                    node = records[i];
                    if (node.parentId !== "") {
                        records[map[node.parentId]].children.push(node);
                    } else {
                        roots.push(node);
                    }
                }
                var isTreeStructure = roots.length == 1 ? 'TRUE' : 'FALSE';
                processTree(roots,isTreeStructure);
                j$( "#subsidiaryRepeat" ).remove();
                if(isTreeStructure=='TRUE') refreshSubsidiarySection('ParentSubsidiary');
                j$("#subsidiary-content").addClass('slds-show').removeClass('slds-hide');
                refreshsubsidiaryNavigator();
                hidespinner();
                
            }

            function processTree(data,isTree){
                var curentId = '{!JSENCODE(recordId)}';
                for(subsidiary in data){
                    if(data[subsidiary].parentId == '' && isTree == 'TRUE'){
                        j$("#subsidiaryName").text(data[subsidiary].name).attr({"title":data[subsidiary].name,"id": 'subsidiaryName'+data[subsidiary].internalId});
                        j$("#listExtension").attr('id', 'listExtension'+data[subsidiary].internalId);
                        j$("#recordLink").attr('id', 'recordLink'+data[subsidiary].internalId);
                    }
                    else{
                        var clone = j$('#subsidiaryRepeat').clone(true).attr('id','subsidiary' + data[subsidiary].internalId);
                        if(data[subsidiary].children.length > 0){
                            j$(".slds-is-nested", clone).attr('id', 'listExtension'+data[subsidiary].internalId);
                            j$(".slds-button img", clone).attr('id', 'subsidiaryImage'+data[subsidiary].internalId);
                            j$(".noChild", clone).remove();
                        }
                        else{
                            j$(clone).removeAttr("aria-expanded");
                            j$(".slds-is-nested", clone).remove();
                            j$(".slds-button", clone).addClass("slds-is-disabled");
                            j$(".slds-button .slds-tree__item-label", clone).remove();
                        }
                        
                        j$(".slds-tree__item-label", clone).text(data[subsidiary].name).attr('title',data[subsidiary].name).attr('id', 'subsidiaryName'+data[subsidiary].internalId);
                        j$(".slds-tree__item a", clone).attr('id', 'recordLink'+data[subsidiary].internalId);
                        
                        if(isTree == 'TRUE') j$("#listExtension"+data[subsidiary].parentId).append(clone);
                        else{
                            j$("#primaryList").append(clone);
                            j$( "#ParentSubsidiary" ).remove();
                        }
                        var arialevel = parseInt(j$('#subsidiary'+data[subsidiary].parentId).attr("aria-level"));
                        arialevel++;
                        j$(clone).attr('aria-level',arialevel);
                    }
                    if(data[subsidiary].sfId != curentId){
                        j$('#recordLink'+data[subsidiary].internalId).attr("href","/"+data[subsidiary].sfId).text("(View)");
                    }
                    else {
                        j$('#recordLink'+data[subsidiary].internalId).text("(Current Subsidiary)").removeAttr("href").addClass("subsidiaryRecord").removeClass("subsidiaryRecordLink");
                        j$('#subsidiaryName'+data[subsidiary].internalId).css("font-weight","bold");
                    }
                    if(data[subsidiary].children.length > 0) processTree(data[subsidiary].children,'TRUE');
                }
            }

            function refreshSubsidiarySection(sectiondiv){
                j$("#"+ sectiondiv).addClass("slds-is-open");
                j$("#"+ sectiondiv+" .slds-is-nested").addClass("slds-show").removeClass("slds-hide");
                j$("#"+ sectiondiv+" .slds-button img").attr("src","{!URLFOR($Resource.Breadwinner_for_NetSuite, 'Breadwinner/Images/chevrondown.png')}");    
            }
            </script>
            <style>
                .permission_warning_message br {
                display: none;
                }
                .permission_warning_message {
                padding-top: 10px !important;
                }
                .message {
                margin-left: 0px !important; margin-right: 0px !important;
                }
                .messageCell {
                width: 100%;
                }
                .slds-scope .slds-tile+.slds-tile {
                margin-top: 0rem;
                }
                .slds-scope .slds-form-element {
                min-height: 45px;
                }
                .slds-scope .slds-section__title-action:hover, .slds-scope .slds-section__title-action:focus, .slds-scope .slds-section__title-action:active {
                background: rgb(243, 242, 242); box-shadow: none;
                }
                .slds-scope .slds-tree__item:hover, .slds-scope .slds-tree__item:focus, .slds-scope .slds-tree__item:active, .slds-scope .subBtn:hover, .slds-scope .subBtn:focus, .slds-scope .subBtn:active{
                background: none; box-shadow: none;
                }
                .slds-scope .subBtn{
                display: inline-flex !important;
                color: inherit !important;
                }
                .slds-tree__item-label {
                color: inherit !important;
                font-size: 0.95rem !important;
                }
                .slds-scope .subsidiaryRecordLink {
                color:gray !important;
                margin-top: 7px;
                font-size: 0.75rem;
                text-decoration: underline;
                }
                .slds-scope .subsidiaryRecordLink:hover{
                text-decoration: underline !important;
                color: rgb(0, 109, 204) !important;
                }
                .slds-scope .subsidiaryImageContainer{
                margin-right: 5px;
                width: 15px;
                }
                .slds-scope .subsidiaryRecord {
                margin-top: 8px !important;
                font-size: 0.75rem !important;
                font-weight: bold;
                }
                .grayTextWithLinks{
                font-size: 0.85rem;font-style: italic;color: gray;   
                }
                .slds-scope lightning-formatted-lookup.slds-form-element__static{
                    color : rgb(1, 118, 211);
                }
                .slds-scope lightning-formatted-lookup.slds-form-element__static:hover{
                	color : rgb(1, 68, 134);
                	text-decoration : underline !important;
                }
                .grayLinks {
                    color: gray !important;
                    text-decoration: underline !important;
                }
                .overrideDefaultHeight .slds-form-element{
                    min-height: 0px;
                }
            </style>
        </head>
        <body style="{!HTMLENCODE(IF(AND(isLightning,showBWLayout), 'background: rgba(176, 196, 223, 1);',''))}">
            <div class="slds-scope">
                <apex:form id="formId">
                    <apex:outputPanel id="SubsidiaryPage" rendered="{!NOT(ISNULL(recordId))}">
                    <apex:outputPanel rendered="{!ISNULL(recordId)}" layout="block">
                        <apex:pageMessage severity="ERROR" strength="2" summary="Breadwinner does not support NetSuite Subsidiary creation from within Salesforce." escape="false" />
                    </apex:outputPanel>
                    <div id="spinnerId" class="slds-spinner_container slds-hide">
                        <div class="slds-spinner_brand slds-spinner slds-spinner_medium" aria-hidden="false" role="alert">
                            <div class="slds-spinner__dot-a"></div>
                            <div class="slds-spinner__dot-b"></div>
                        </div>
                    </div>
                    <apex:actionFunction name="initializeSubsidiaries" action="{!initializeSubsidiaries}" status="action-status" oncomplete="processSubsidiaries('{!JSENCODE(nsSubsidiaries)}');" rendered="{!showBWLayout}">
                        <apex:param name="subsidiaries" value="" assignTo="{!nsSubsidiaries}" />
                    </apex:actionFunction>
                    <apex:actionFunction name="refreshsubsidiaryNavigator" reRender="subsidiary-content"/>
                    <apex:outputPanel layout="block" rendered="{!AND(NOT(showBWLayout),NOT(isControlSync))}">
                        <div class="slds-box slds-align_absolute-center" style="height: 200px;">
                            <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                <tr>
                                    <td class="image" style="width: 200px;">
                                        <apex:image url="{!URLFOR($Resource.breadwinner_ns__Breadwinner_for_NetSuite, 'Breadwinner/Images/breadwinner.png')}" />
                                    </td>
                                    <td class="content">
                                        <div class="slds-text-align_center" style="font-size: 2.1em;">
                                            <a id="SubsidiaryLayout" rel="noopener noreferrer" href="{!$Page.SubsidiaryRecordInfo}?id={!JSENCODE(recordId)}&showBWLayout=true" target="_parent" >View NetSuite Subsidiary in Dedicated Layout</a>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!AND(showBWLayout,ISNULL(sub.id),NOT(ISNULL(recordId)))}" layout="block" styleClass="{!IF(isLightning,'slds-p-around_small','')}">
                        <apex:pageMessage severity="ERROR" strength="2" summary="<b>Record deleted<b/>" escape="false" rendered="{!showRecordDeletedMessage}">
                            <p>The record you attempted to access has been deleted. The user who deleted this record may be able to recover it from the Recycle Bin. Deleted data is stored in the Recycle Bin for 15 days.</p>
                        </apex:pageMessage>
                        <apex:pageMessages id="beforeRecordFetch" rendered="{!!showRecordDeletedMessage}"/>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!AND(showBWLayout,NOT(ISNULL(sub.id)),NOT(isControlSync))}" layout="block" styleClass="{!IF(isLightning,'slds-p-around_small slds-brand-band slds-brand-band_cover slds-brand-band_medium','')}">
                        <apex:outputPanel layout="block">
                            <div id="help" class="slds-popover slds-popover_tooltip slds-nubbin_bottom-left" role="tooltip" aria-live="polite" style="display:none;position:absolute;top:0px;left:0px;">
                                <div class="slds-popover__body slds-text-longform">
                                    <p>Help text will come here dynamically</p>
                                </div>
                            </div>
                            <!-- Page Header Start -->
                            <div class="slds-page-header slds-m-bottom_small" role="banner">
                                <div class="slds-grid">
                                    <div class="slds-col slds-has-flexi-truncate">
                                        <div class="slds-media slds-media_center">
                                            <div class="slds-media__figure">
                                                <span class="slds-icon_container slds-icon-custom-custom68 Icon">
                                                    <svg class="slds-icon slds-page-header__icon" aria-hidden="true">
                                                        <use rel="noopener noreferrer" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS,'assets/icons/custom-sprite/svg/symbols.svg#custom68')}" />
                                                    </svg>
                                                    <span class="slds-assistive-text"></span>
                                                </span>
                                            </div>
                                            <div class="slds-media__body">
                                                <p>NetSuite Subsidiary</p>
                                                <p class="slds-page-header__title">
                                                    <apex:outputText value="{!sub.Name}" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.Name.Accessible}"/>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
   									<div class="slds-col slds-grid slds-align-bottom slds-grid_align-end slds-size_1-of-1 slds-medium-size_4-of-12 slds-large-size_4-of-12">
                                        <div class="slds-grid slds-wrap">
                                            <div class="slds-col slds-p-bottom_xx-small slds-p-left_xx-small">
                                                <apex:commandButton id="ControlSync" value="Control Sync Status" styleClass="slds-button slds-button_brand" oncomplete="addallstyles();reRenderImage();" action="{!SubsidiaryControlSyncPage}" reRender="SubsidiaryPage" status="action-status" rendered="{!AND(canPerformBreadwinnerOperations,NOT(ISNULL(sub.breadwinner_ns__InternalId__c)))}"></apex:commandButton>
                                            </div> 
                                        </div>
                                   </div>                                      
                                </div>
                            </div>
                            <!-- Page Header End -->
                            <apex:pageMessages />
                            <apex:pageMessage severity="Error" rendered="{!AND(ISBLANK(acWrapper.Name),$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__NetSuite_Org_Id__c.Accessible)}" summary="The NetSuite Org ID provided is not authorized with Breadwinner. Please connect to it from Breadwinner for NetSuite tab."/>
                            <apex:pageMessage escape="false" severity="WARNING" summary="{!pageMessage}" rendered="{!LEN(pageMessage)>0}" />
                            <apex:pageMessage severity="Info" rendered="{!AND(ISBLANK(sub.breadwinner_ns__InternalId__c),(sub.Name = acWrapper.Name))}" summary="This is a NetSuite Org level Subsidiary, created only in the Salesforce by Breadwinner."></apex:pageMessage>
                            <apex:outputPanel styleClass="permission_warning_message" rendered="{!AND(NOT(isBWPermissionSetAssingedToCurrentUser),$ObjectType.PermissionSetAssignment.Accessible)}">
                                <apex:pageMessage severity="Warning">
                                    <apex:outputText value="You might not see all the fields on this page as no Breadwinner Permission Sets were assigned to you. You must at least have a Breadwinner Read Only Permission Set assigned, to see all the fields. "/>
                                    <apex:outputText rendered="{!(isAdministrator)}">
                                        You can add the Breadwinner Permission Set to one or more users by going to the Permissions tab on the
                                        <a rel="noopener noreferrer" href="{!$Page.BreadwinnerForNetSuite}"> Breadwinner For NetSuite page.</a>
                                    </apex:outputText>
                                    <apex:outputText rendered="{!NOT(isAdministrator)}" value="Please ask your Salesforce Administrator to assign you appropriate Permissions."/>
                                </apex:pageMessage>
                            </apex:outputPanel>
                            <div class="slds-card slds-grid slds-grid_vertical slds-m-bottom_small sections">
                                <!-- Subsidiary Information SECTION START -->
                                <div class="slds-panel__section slds-p-top_small slds-p-bottom_none">
                                    <div class="slds-section slds-is-open">
                                        <h3 class="slds-section__title slds-theme_shade">
                                            <span class="slds-truncate slds-p-horizontal_small">Subsidiary Information</span>
                                        </h3>
                                        <div class="slds-section__content slds-p-around_small">
                                            <div class="slds-grid slds-gutters_large slds-has-flexi-truncate slds-wrap">
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_1 slds-medium-order_1 slds-order_1" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.Name.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Subsidiary Name</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.Name}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_2 slds-medium-order_2 slds-order_7" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__CurrencyName__c.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Currency</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.breadwinner_ns__CurrencyName__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col  slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_3 slds-medium-order_8 slds-order_10" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__Email__c.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Return Email Address</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.breadwinner_ns__Email__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 {!IF(NOT(ISNULL(sub.breadwinner_ns__Parent__c)),'slds-large-order_4','slds-large-order_12')} slds-medium-order_3 slds-order_2" rendered="{!AND($ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__Parent__c.Accessible,$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.Name.Accessible,NOT(ISNULL(sub.breadwinner_ns__Parent__c)))}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Parent Subsidiary</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputLink rel="noopener noreferrer" value="/{!URLFOR(sub.breadwinner_ns__Parent__c)}" target="_blank">
                                                                    <apex:outputText value="{!sub.Parent__r.Name}" />
                                                                </apex:outputLink>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_5 slds-medium-order_4 slds-order_8" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__Country__c.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Country</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputText value="{!sub.breadwinner_ns__Country__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col  slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_6 slds-medium-order_10 slds-order_11" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__URL__c.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Web Site</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.breadwinner_ns__URL__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_4 slds-medium-order_5 slds-order_3" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__LegalName__c.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Legal Name</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.breadwinner_ns__LegalName__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_8 slds-medium-order_6 slds-order_9" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__State__c.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">State</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.breadwinner_ns__State__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col  slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_9 slds-medium-order_12 slds-order_12" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__Fax__c.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Fax</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.breadwinner_ns__Fax__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col  slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 {!IF(AND(NOT(ISNULL(sub.breadwinner_ns__Parent__c)),$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__Parent__c.Accessible),'slds-large-order_10','slds-large-order_12')} slds-medium-order_7 slds-order_4" rendered="{!AND($ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__IsInactive__c.Accessible,sub.breadwinner_ns__IsInactive__c)}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Inactive</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.breadwinner_ns__IsInactive__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col  slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 {!IF(AND(NOT(ISNULL(sub.breadwinner_ns__Parent__c)),$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__Parent__c.Accessible),'slds-large-order_11','slds-large-order_7')} slds-medium-order_9 slds-order_5" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__IsElimination__c.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Elimination</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputText value="{!IF(sub.breadwinner_ns__IsElimination__c,'Yes','No')}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 {!IF(AND(NOT(ISNULL(sub.breadwinner_ns__Parent__c)),$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__Parent__c.Accessible),'slds-large-order_12','slds-large-order_10')} slds-medium-order_11 slds-order_6" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__Edition__c.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Edition</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.breadwinner_ns__Edition__c}" />
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_12 slds-medium-order_12 slds-order_12" rendered="{!AND($ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__NetSuite_Org_Id__c.Accessible,$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__InternalId__c.Accessible,NOT(ISBLANK(netSuite_URL)))}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">View this Subsidiary in NetSuite</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputLink rel="noopener noreferrer" value="{!netSuite_URL}" target="_blank">Click Here</apex:outputLink>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_12 slds-medium-order_12 slds-order_12" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__Complete_Hierarchy_Name__c.Accessible}" >
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Complete Hierarchy Name</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.breadwinner_ns__Complete_Hierarchy_Name__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Subsidiary Information SECTION END -->
                                <div class="slds-panel__section slds-p-bottom_none slds-p-top_none">
                                    <div class="slds-section slds-m-top_none slds-is-open">
                                        <h3 class="slds-section__title slds-theme_shade">
                                            <span class="slds-truncate slds-p-horizontal_small">Breadwinner Sync Configuration</span>
                                        </h3>
                                        <div class="slds-section__content slds-p-around_small slds-p-top_none">
                                            <div class="slds-grid slds-gutters_large slds-has-flexi-truncate slds-wrap slds-p-top_x-small">
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_1 slds-medium-order_1 slds-order_1" rendered="{!AND($ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__SF_Account_Match_Configuration__c.Accessible, OR(AND(isSubsidiaryDisabledInNetSuite,ISBLANK(sub.breadwinner_ns__InternalId__c)), AND(NOT(isSubsidiaryDisabledInNetSuite),NOT(ISBLANK(sub.breadwinner_ns__InternalId__c)))))}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">SF Account Match Configuration</label>
                                                        <div class="slds-form-element__icon">
                                                            <a rel="noopener noreferrer" href="javascript:void(0);" tabindex="-1">
                                                                <apex:image style="height:15px;width:15px;" id="SFAccountMatchConfig" value="{!URLFOR($Resource.breadwinner_ns__Breadwinner_for_NetSuite, 'Breadwinner/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'SFAccountMatchConfig','225','37')" onmouseout="mouseoutclose();" />
                                                                <span class="slds-assistive-text">Help</span>
                                                            </a>
                                                        </div>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputText value="{!sub.breadwinner_ns__SF_Account_Match_Configuration__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_1 slds-medium-order_1 slds-order_1" rendered="{!AND($ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__SF_Account_Configuration__c.Accessible, OR(AND(isSubsidiaryDisabledInNetSuite,ISBLANK(sub.breadwinner_ns__InternalId__c)), AND(NOT(isSubsidiaryDisabledInNetSuite),NOT(ISBLANK(sub.breadwinner_ns__InternalId__c)))))}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">SF Account Configuration</label>
                                                        <div class="slds-form-element__icon">
                                                            <a rel="noopener noreferrer" href="javascript:void(0);" tabindex="-1">
                                                                <apex:image style="height:15px;width:15px;" id="SFAccountConfig" value="{!URLFOR($Resource.breadwinner_ns__Breadwinner_for_NetSuite, 'Breadwinner/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'SFAccountConfig','225','37')" onmouseout="mouseoutclose();" />
                                                                <span class="slds-assistive-text">Help</span>
                                                            </a>
                                                        </div>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputText value="{!sub.breadwinner_ns__SF_Account_Configuration__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_1 slds-medium-order_1 slds-order_1" rendered="{!AND($ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__SF_Product_Configuration__c.Accessible,ISNULL(sub.breadwinner_ns__InternalId__c))}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">SF Product Configuration</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputText value="{!sub.breadwinner_ns__SF_Product_Configuration__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_1 slds-medium-order_1 slds-order_1" rendered="{!AND($ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__SF_Price_Book_Configuration__c.Accessible,ISNULL(sub.breadwinner_ns__InternalId__c))}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">SF Price Book Configuration</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputText value="{!sub.breadwinner_ns__SF_Price_Book_Configuration__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Salesforce Custom Fields SECTION START -->
                                <apex:includeLightning />
                                <div id="SfCustomFieldsComponentid" />
                                <div id="SfCustomFieldsComponentid-spin">
                                    <div style="height: 3rem;position:relative;">
                                        <div role="status" class="slds-spinner slds-spinner_small slds-spinner_brand">
                                            <span class="slds-assistive-text">Loading</span>
                                            <div class="slds-spinner__dot-a"></div>
                                            <div class="slds-spinner__dot-b"></div>
                                        </div>
                                    </div>
                                </div>
                                <apex:variable var="cmpNamespacePrefix" value="{!getCompNamespacePrefix}" />
                                <script>
                                    $Lightning.use("{!JSENCODE(cmpNamespacePrefix)}:lightningOutUnstyled", function() {
                                            $Lightning.createComponent("{!JSENCODE(cmpNamespacePrefix)}:recordFieldsDisplay",
                                                                        { 
                                                                            recordId : '{!recordId}',
                                                                            isFromBreadwinner : true ,
                                                                            sectionType : "Your Company's Custom Fields"
                                                                            
                                                                        },
                                                                        "SfCustomFieldsComponentid", 
                                                                        function(cmp) {
                                                                            setTimeout(function(){document.getElementById('SfCustomFieldsComponentid-spin').style.display="none";},3000);
                                                                        });
                                    });
                                </script>
                                <!-- Salesforce Custom Fields SECTION END -->
                                <div class="slds-panel__section slds-p-bottom_none slds-p-top_none">
                                    <div class="slds-section slds-m-top_none" id="SectionHeader">
                                        <h3 class="slds-section__title slds-theme_shade">
                                            <button class="slds-button slds-section__title-action" type="button" onclick="showHideSectionConent('SectionHeader','addSection');">
                                                <svg aria-hidden="true" class="slds-section__title-action-icon slds-button__icon slds-button__icon_left">
                                                    <use rel="noopener noreferrer" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#switch')}"></use>
                                                </svg>Additional Information</button>
                                        </h3>
                                        <div class="slds-section__content slds-p-around_small slds-p-top_none" id="addSection">
                                            <div class="slds-grid slds-gutters_large slds-has-flexi-truncate slds-wrap slds-p-top_x-small">
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_1 slds-medium-order_1 slds-order_1" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.OwnerId.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Owner</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.OwnerId}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_2 slds-medium-order_3 slds-order_3" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__InternalId__c.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Internal Id</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.breadwinner_ns__InternalId__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_5 slds-medium-order_5 slds-order_4" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__ExternalId__c.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">External Id</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.breadwinner_ns__ExternalId__c}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_4 slds-medium-order_2 slds-order_2" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.breadwinner_ns__NetSuite_Org_Id__c.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">NetSuite Org Id</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.breadwinner_ns__NetSuite_Org_Id__c}" />
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-3 slds-medium-size_1-of-2 slds-size_1-of-1 slds-large-order_3 slds-medium-order_4 slds-order_5" rendered="{!$ObjectType.breadwinner_ns__BW_Subsidiary__c.fields.LastModifiedDate.Accessible}">
                                                    <div class="slds-form-element slds-border_bottom">
                                                        <label class="slds-form-element__label">Last Modified Date in Salesforce</label>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outputField value="{!sub.LastModifiedDate}" />
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <apex:outputPanel layout="block" rendered="{!AND(NOT(ISBLANK(sub.breadwinner_ns__InternalId__c)),subsidiariesCount<50)}" styleClass="slds-card slds-grid slds-grid_vertical slds-m-top_none sections">
                                <div class="slds-panel__section slds-p-top_small slds-p-bottom_none slds-hide" id="subsidiary-content">
                                    <div class="slds-section slds-is-open">
                                        <h3 class="slds-section__title slds-theme_shade">
                                            <span class="slds-truncate slds-p-horizontal_small">Subsidiary Navigator</span>
                                        </h3>
                                        <div class="slds-section__content slds-p-around_small">
                                            <div class="slds-tree_container">
                                                <ul aria-labelledby="treeheading" class="slds-tree" role="tree" id="primaryList">
                                                    <li aria-expanded="true" aria-level="1" role="treeitem" id="ParentSubsidiary" class="slds-section slds-is-open slds-m-vertical_none">
                                                        <div class="slds-tree__item">
                                                            <button class="slds-button slds-m-top_none subBtn" onclick="showHideChildSubsidiaries(this);return false;">
                                                                <img id="subsidiarySecImage" src="{!URLFOR($Resource.Breadwinner_for_NetSuite, 'Breadwinner/Images/chevronright.png')}" class="subsidiaryImageContainer"/>
                                                                <span class="slds-tree__item-label slds-truncate" id="subsidiaryName"> </span>
                                                            </button>
                                                            <a rel="noopener noreferrer" href="" id="recordLink" target="_blank" class="subsidiaryRecordLink slds-p-left_xx-small"> </a>
                                                        </div>
                                                        <ul role="group" class="slds-is-nested" id="listExtension"> </ul>
                                                    </li>
                                                </ul>
                                            </div>
                                            <li aria-expanded="true" aria-level="1" role="treeitem" id="subsidiaryRepeat" class="slds-section slds-is-open slds-m-vertical_none">
                                                <div class="slds-tree__item" style="min-height: 44px;">
                                                    <button class="slds-button slds-m-top_none subBtn" onclick="showHideChildSubsidiaries(this);return false;">
                                                        <img src="{!URLFOR($Resource.Breadwinner_for_NetSuite, 'Breadwinner/Images/chevronright.png')}" class="subsidiaryImageContainer"/>
                                                        <span class="slds-tree__item-label slds-truncate"></span>
                                                    </button>
                                                    <span class="slds-tree__item-label noChild slds-truncate" style="margin-top:5px;"> </span>
                                                    <a rel="noopener noreferrer" href="" target="_blank" class="subsidiaryRecordLink slds-p-left_xx-small"> </a>
                                                </div>
                                                <ul role="group" class="slds-is-nested"> </ul>
                                            </li>
                                        </div>
                                    </div>
                                </div>
                            </apex:outputPanel>
                        </apex:outputPanel>
                    </apex:outputPanel>
    				<apex:outputPanel layout="block" id="ControlSyncSection" rendered="{!AND(isControlSync,NOT(showBWLayout))}" styleClass="{!IF(isLightning,'slds-p-around_small slds-brand-band slds-brand-band_cover slds-brand-band_medium','')}"> 
                            <!-- Page Header Start -->
                            <div class="slds-page-header slds-m-bottom_small" role="banner">
                                <div class="slds-media slds-media_center">
                                    <div class="slds-media__figure">
                                        <span class="slds-icon_container slds-icon-custom-custom3 Icon">
                                            <svg class="slds-icon slds-page-header__icon" aria-hidden="true">
                                                <use rel="noopener noreferrer" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/custom-sprite/svg/symbols.svg#custom3')}" />
                                            </svg>
                                            <span class="slds-assistive-text">NetSuite Subsidiary Sync Status</span>
                                        </span>
                                    </div>
                                    <div class="slds-media__body">
                                        <p class="slds-page-header__title slds-truncate slds-align-middle" title="Breadwinner NetSuite Subsidiary">NetSuite Subsidiary Sync Status</p>
                                        <p class="slds-text-body_small slds-line-height_reset">Breadwinner • NetSuite</p>
                                    </div>
                                </div>
                            </div>
                            <apex:actionFunction name="changeSyncStatus" status="action-status" reRender="controlstatus" oncomplete="addallstyles();"/>
                            <apex:outputPanel rendered="{!NOT(isNetSuiteObjectSyncConfigDone)}">
                                <apex:pageMessage severity="Warning" strength="2" summary="<b>Please complete the Initial NetSuite Object Sync from the Breadwinner for NetSuite tab.<b/>" escape="false" />
                            </apex:outputPanel>
                        	<apex:outputPanel rendered="{!AND(NOT(OR(orgLevelSyncStatus['Customer'],orgLevelSyncStatus['Check'],orgLevelSyncStatus['Contact'])),isNetSuiteObjectSyncConfigDone)}">
                                <apex:pageMessage severity="Warning" strength="2" summary="<b>Please configure the org level NetSuite Object Sync from the Breadwinner for NetSuite tab.<b/>" escape="false" />
                            </apex:outputPanel>
                            <!-- / PAGE HEADER -->
                               <apex:outputPanel id="controlstatus"> 
                                <apex:outputPanel layout="block" styleClass="slds-card">
                                    <apex:outputPanel >
                                        <div class="slds-panel__section slds-p-bottom_none">
                                            <div class="slds-section slds-is-open slds-m-vertical_none">
                                                <h3 class="slds-section__title slds-theme_shade">
                                                    <span class="slds-truncate slds-p-horizontal_small">NetSuite Object Sync Configuration for {!sub.Name}</span>
                                                </h3>
                                                <apex:outputPanel styleClass="slds-section__content slds-grid slds-wrap slds-grid_vertical slds-p-horizontal_small slds-m-top_xx-small">
                                                    <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-1 slds-medium-size_1-of-1 slds-grid slds-wrap" rendered="{!orgLevelSyncStatus['Customer']}">
                                                        <div class="slds-col slds-text-heading_small slds-m-bottom_none slds-p-right_medium slds-p-top_xxx-small slds-large-size_2-of-4 slds-medium-size_2-of-4">Customers</div>
                                                        <div class="slds-col slds-form-element slds-large-size_1-of-4 slds-medium-size_1-of-4">   
                                                            <label class="slds-checkbox_toggle slds-grid"> 
                                                                <apex:inputCheckbox id="Customer" value="{!objectToSyncMap['Customer']}" onclick="changeSyncStatus();"/>
                                                                <span  class="slds-checkbox_faux_container" aria-live="assertive">
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    <span class="slds-checkbox_on">Yes</span>
                                                                    <span class="slds-checkbox_off">No</span>
                                                                </span>
                                                            </label>
                                                        </div>
                                                    </apex:outputPanel>
                                                     <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-1 slds-medium-size_1-of-1 slds-grid slds-wrap" rendered="{!orgLevelSyncStatus['Vendor']}">
                                                        <div class="slds-col slds-text-heading_small slds-m-bottom_none slds-p-right_medium slds-p-top_xxx-small slds-large-size_2-of-4 slds-medium-size_2-of-4">Vendors</div>
                                                        <div class="slds-col slds-form-element slds-large-size_1-of-4 slds-medium-size_1-of-4">   
                                                            <label class="slds-checkbox_toggle slds-grid"> 
                                                                <apex:inputCheckbox id="Vendor" value="{!objectToSyncMap['Vendor']}" onclick="changeSyncStatus();"/>
                                                                <span  class="slds-checkbox_faux_container" aria-live="assertive">
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    <span class="slds-checkbox_on">Yes</span>
                                                                    <span class="slds-checkbox_off">No</span>
                                                                </span>
                                                            </label>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-1 slds-medium-size_1-of-1 slds-grid slds-wrap" rendered="{!OR(AND(objectToSyncMap['Customer'],orgLevelSyncStatus['Customer']),AND(objectToSyncMap['Vendor'],orgLevelSyncStatus['Vendor']))}">
                                                        <div class="slds-col slds-text-heading_small slds-m-bottom_none slds-p-right_medium slds-p-top_xxx-small slds-large-size_2-of-4 slds-medium-size_2-of-4">Auto-Match Salesforce Accounts from New NetSuite Companies?</div>
                                                        <div class="slds-col slds-form-element slds-large-size_1-of-4 slds-medium-size_1-of-4">
                                                        <apex:outputPanel layout="block" styleClass="slds-select_container slds-medium-size_1-of-4" style="min-width:max-content;">
                                                                    <apex:selectList styleClass="slds-select selectedOrgSFAccountMatchConfig" id="selectedOrgSFAccountMatchConfig" value="{!sub.breadwinner_ns__SF_Account_Match_Configuration__c}" size="1" onchange="showHidePicklistValues(this,'selectedOrgSFAccountConfig');">
                                                                        <apex:selectOption itemvalue="" itemLabel=""/>
                                                                        <apex:selectOption itemvalue="Auto Match (Active Companies Only)" itemLabel="Active Companies"  rendered="{!IF(AND(objectToSyncMap['Customer'],objectToSyncMap['Vendor']), 'TRUE', 'FALSE')}"/>
                                                                        <apex:selectOption itemvalue="Auto Match (Active and Inactive Companies)" itemLabel="All Companies" rendered="{!IF(AND(objectToSyncMap['Customer'],objectToSyncMap['Vendor']), 'TRUE', 'FALSE')}"/>
                                                                        <apex:selectOption itemvalue="Auto Match (Active Customers Only)" itemLabel="Only Active Customers" rendered="{!objectToSyncMap['Customer']}"/>
                                                                        <apex:selectOption itemvalue="Auto Match (Active and Inactive Customers)" itemLabel="Only Customers" rendered="{!objectToSyncMap['Customer']}"/>
                                                                        <apex:selectOption itemvalue="Auto Match (Active Vendors Only)" itemLabel="Only Active Vendors" rendered="{!objectToSyncMap['Vendor']}"/>
                                                                        <apex:selectOption itemvalue="Auto Match (Active and Inactive Vendors)" itemLabel="Only Vendors" rendered="{!objectToSyncMap['Vendor']}"/>
                                                                        <apex:selectOption itemvalue="Do Not Match" itemLabel="Do Not Match Accounts"/>
                                                                    </apex:selectList>
                                                        </apex:outputPanel>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-1 slds-medium-size_1-of-1 slds-grid slds-wrap" rendered="{!OR(AND(objectToSyncMap['Customer'],orgLevelSyncStatus['Customer']),AND(objectToSyncMap['Vendor'],orgLevelSyncStatus['Vendor']))}">
                                                        <div class="slds-col slds-text-heading_small slds-m-bottom_none slds-p-right_medium slds-p-top_xxx-small slds-large-size_2-of-4 slds-medium-size_2-of-4">Auto-Create Salesforce Accounts from New NetSuite Companies?</div>
                                                        <div class="slds-col slds-form-element slds-large-size_1-of-4 slds-medium-size_1-of-4">
                                                        <apex:outputPanel layout="block" styleClass="slds-select_container slds-medium-size_1-of-4" style="min-width:max-content;">
                                                                    <apex:selectList styleClass="slds-select selectedOrgSFAccountConfig" id="selectedOrgSFAccountConfig" value="{!sub.breadwinner_ns__SF_Account_Configuration__c}" size="1" onclick="showHidePicklistValues(this,'');">
                                                                        <apex:selectOption itemvalue="" itemLabel=""/>
                                                                        <apex:selectOption itemvalue="Auto Create (Active Companies Only)" itemLabel="Active Companies"  rendered="{!IF(AND(objectToSyncMap['Customer'],objectToSyncMap['Vendor']), 'TRUE', 'FALSE')}"/>
                                                                        <apex:selectOption itemvalue="Auto Create (Active and Inactive Companies)" itemLabel="All Companies" rendered="{!IF(AND(objectToSyncMap['Customer'],objectToSyncMap['Vendor']), 'TRUE', 'FALSE')}"/>
                                                                        <apex:selectOption itemvalue="Auto Create (Active Customers Only)" itemLabel="Only Active Customers" rendered="{!objectToSyncMap['Customer']}"/>
                                                                        <apex:selectOption itemvalue="Auto Create (Active and Inactive Customers)" itemLabel="Only Customers" rendered="{!objectToSyncMap['Customer']}"/>
                                                                        <apex:selectOption itemvalue="Auto Create (Active Vendors Only)" itemLabel="Only Active Vendors" rendered="{!objectToSyncMap['Vendor']}"/>
                                                                        <apex:selectOption itemvalue="Auto Create (Active and Inactive Vendors)" itemLabel="Only Vendors" rendered="{!objectToSyncMap['Vendor']}"/>
                                                                        <apex:selectOption itemvalue="Do Not Create" itemLabel="Do Not Create Accounts"/>
                                                                    </apex:selectList>
                                                        </apex:outputPanel>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-1 slds-medium-size_1-of-1 slds-grid slds-wrap" rendered="{!AND(objectToSyncMap['Vendor'],orgLevelSyncStatus['PurchaseOrder'])}">
                                                        <div class="slds-col slds-text-heading_small slds-m-bottom_none slds-p-right_medium slds-p-top_xxx-small slds-large-size_2-of-4 slds-medium-size_2-of-4">Purchase Orders</div>
                                                        <div class="slds-col slds-form-element slds-large-size_1-of-4 slds-medium-size_1-of-4">   
                                                            <label class="slds-checkbox_toggle slds-grid"> 
                                                                <apex:inputCheckbox id="PurchaseOrder" value="{!objectToSyncMap['PurchaseOrder']}"/>
                                                                <span  class="slds-checkbox_faux_container" aria-live="assertive">
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    <span class="slds-checkbox_on">Yes</span>
                                                                    <span class="slds-checkbox_off">No</span>
                                                                </span>
                                                            </label>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-1 slds-medium-size_1-of-1 slds-grid slds-wrap" rendered="{!AND(objectToSyncMap['Customer'],orgLevelSyncStatus['Estimate'])}">
                                                        <div class="slds-col slds-text-heading_small slds-m-bottom_none slds-p-right_medium slds-p-top_xxx-small slds-large-size_2-of-4 slds-medium-size_2-of-4">Estimates and Sales Orders</div>
                                                        <div class="slds-col slds-form-element slds-large-size_1-of-4 slds-medium-size_1-of-4">   
                                                            <label class="slds-checkbox_toggle slds-grid"> 
                                                                <apex:inputCheckbox id="Estimate" value="{!objectToSyncMap['Estimate']}"/>
                                                                <span  class="slds-checkbox_faux_container" aria-live="assertive">
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    <span class="slds-checkbox_on">Yes</span>
                                                                    <span class="slds-checkbox_off">No</span>
                                                                </span>
                                                            </label>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-1 slds-medium-size_1-of-1 slds-grid slds-wrap" rendered="{!AND(objectToSyncMap['Customer'],orgLevelSyncStatus['ReturnAuthorization'])}">
                                                        <div class="slds-col slds-text-heading_small slds-m-bottom_none slds-p-right_medium slds-p-top_xxx-small slds-large-size_2-of-4 slds-medium-size_2-of-4">RMA</div>
                                                        <div class="slds-col slds-form-element slds-large-size_1-of-4 slds-medium-size_1-of-4">   
                                                            <label class="slds-checkbox_toggle slds-grid"> 
                                                                <apex:inputCheckbox id="ReturnAuthorization" value="{!objectToSyncMap['ReturnAuthorization']}"/>
                                                                <span  class="slds-checkbox_faux_container" aria-live="assertive">
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    <span class="slds-checkbox_on">Yes</span>
                                                                    <span class="slds-checkbox_off">No</span>
                                                                </span>
                                                            </label>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-1 slds-medium-size_1-of-1 slds-grid slds-wrap" rendered="{!AND(objectToSyncMap['Customer'],orgLevelSyncStatus['Invoice'])}">
                                                        <div class="slds-col slds-text-heading_small slds-m-bottom_none slds-p-right_medium slds-p-top_xxx-small slds-large-size_2-of-4 slds-medium-size_2-of-4">Accounts Receivable</div>
                                                        <div class="slds-col slds-form-element slds-large-size_1-of-4 slds-medium-size_1-of-4">   
                                                            <label class="slds-checkbox_toggle slds-grid"> 
                                                                <apex:inputCheckbox id="Invoice" value="{!objectToSyncMap['Invoice']}"/>
                                                                <span  class="slds-checkbox_faux_container" aria-live="assertive">
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    <span class="slds-checkbox_on">Yes</span>
                                                                    <span class="slds-checkbox_off">No</span>
                                                                </span>
                                                            </label>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-1 slds-medium-size_1-of-1 slds-grid slds-wrap" rendered="{!AND(objectToSyncMap['Vendor'],orgLevelSyncStatus['VendorBill'])}">
                                                        <div class="slds-col slds-text-heading_small slds-m-bottom_none slds-p-right_medium slds-p-top_xxx-small slds-large-size_2-of-4 slds-medium-size_2-of-4">Accounts Payable</div>
                                                        <div class="slds-col slds-form-element slds-large-size_1-of-4 slds-medium-size_1-of-4">   
                                                            <label class="slds-checkbox_toggle slds-grid"> 
                                                                <apex:inputCheckbox id="VendorBill" value="{!objectToSyncMap['VendorBill']}"/>
                                                                <span  class="slds-checkbox_faux_container" aria-live="assertive">
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    <span class="slds-checkbox_on">Yes</span>
                                                                    <span class="slds-checkbox_off">No</span>
                                                                </span>
                                                            </label>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-1 slds-medium-size_1-of-1 slds-grid slds-wrap" rendered="{!orgLevelSyncStatus['Contact']}">
                                                        <div class="slds-col slds-text-heading_small slds-m-bottom_none slds-p-right_medium slds-p-top_xxx-small slds-large-size_2-of-4 slds-medium-size_2-of-4">Contacts</div>
                                                        <div class="slds-col slds-form-element slds-large-size_1-of-4 slds-medium-size_1-of-4">   
                                                            <label class="slds-checkbox_toggle slds-grid"> 
                                                                <apex:inputCheckbox id="Contact" value="{!objectToSyncMap['Contact']}"/>
                                                                <span  class="slds-checkbox_faux_container" aria-live="assertive">
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    <span class="slds-checkbox_on">Yes</span>
                                                                    <span class="slds-checkbox_off">No</span>
                                                                </span>
                                                            </label>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="slds-col slds-large-size_1-of-1 slds-medium-size_1-of-1 slds-grid slds-wrap" rendered="{!orgLevelSyncStatus['Check']}">
                                                        <div class="slds-col slds-text-heading_small slds-m-bottom_none slds-p-right_medium slds-p-top_xxx-small slds-large-size_2-of-4 slds-medium-size_2-of-4">Checks</div>
                                                        <div class="slds-col slds-form-element slds-large-size_1-of-4 slds-medium-size_1-of-4">   
                                                            <label class="slds-checkbox_toggle slds-grid"> 
                                                                <apex:inputCheckbox id="Check" value="{!objectToSyncMap['Check']}"/>
                                                                <span  class="slds-checkbox_faux_container" aria-live="assertive">
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    <span class="slds-checkbox_on">Yes</span>
                                                                    <span class="slds-checkbox_off">No</span>
                                                                </span>
                                                            </label>
                                                        </div>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                                <apex:outputPanel styleClass="slds-m-left_x-small" rendered="{!AND(isNetSuiteObjectSyncConfigDone,OR(orgLevelSyncStatus['Customer'],orgLevelSyncStatus['Check'],orgLevelSyncStatus['Contact']))}"><i>Note: Please restart the respective object syncs after configuration using Troubleshoot tab from Breadwinner.</i></apex:outputPanel>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                    <apex:outputPanel id="panelbuttons" layout="block" styleClass="slds-m-top_small slds-m-bottom_medium slds-text-align_center">
										<apex:commandButton value="Cancel" styleClass="slds-button slds-button_neutral" action="{!Cancel}" status="action-status" id="cancelbutton"/>
                                        <apex:commandButton value="Save" styleClass="slds-button slds-button_brand slds-m-left_x-small" id="savebutton" oncomplete="addallstyles();" status="action-status" action="{!updateSubsidiarySyncSettings}" disabled="{!NOT(OR(orgLevelSyncStatus['Customer'],orgLevelSyncStatus['Check'],orgLevelSyncStatus['Contact']))}" reRender="controlstatus"/>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                        </apex:outputPanel>  
                        </apex:outputPanel>                        
                   </apex:outputPanel>
                </apex:form>
            </div>
        </body>
    </html>
</apex:page>