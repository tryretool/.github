<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Alert_Regarding_Missing_Prefix</name>
        <label>Alert Regarding Missing Prefix</label>
        <locationX>627</locationX>
        <locationY>1048</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <stringValue>honey@retool.com</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>New Form Submission Missing Prefix</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <stringValue>A new form submission has been found with a missing prefix. Subject: {!$Record.Subject} ID: https://retool.lightning.force.com/lightning/r/Task/{!$Record.Id}/view</stringValue>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <apiVersion>52.0</apiVersion>
    <assignments>
        <name>Check_MQL_to_False</name>
        <label>Check MQL to False</label>
        <locationX>1023</locationX>
        <locationY>1318</locationY>
        <assignmentItems>
            <assignToReference>MomentCheckMQL</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Moment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Check_MQL_to_True</name>
        <label>Check MQL to True</label>
        <locationX>1140</locationX>
        <locationY>1068</locationY>
        <assignmentItems>
            <assignToReference>MomentCheckMQL</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Moment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Patch_activity_date</name>
        <label>Patch activity date</label>
        <locationX>1431</locationX>
        <locationY>557</locationY>
        <assignmentItems>
            <assignToReference>$Record.ActivityDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.CreatedDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Integration_Stamp__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Outreach ActivityDate Bug (After Save)</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>commit_task_updates</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_ROE_tracking</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Stamp_fields</name>
        <label>Stamp fields</label>
        <locationX>2293</locationX>
        <locationY>807</locationY>
        <assignmentItems>
            <assignToReference>$Record.Account_Num_Open_Opportunities__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.Num_Open_Opportunities__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Account_Status_Committed__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.Account_Status_Committed__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>commit_task_updates</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Suppression_Reason</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_activity_tracking</name>
        <label>Update activity tracking</label>
        <locationX>1642</locationX>
        <locationY>50</locationY>
        <assignmentItems>
            <assignToReference>Get_account_team_member.Most_Recent_Task_At__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>most_recent_activity_date</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Commit_team_member</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Commit_task_updates_dec</name>
        <label>Commit task updates?</label>
        <locationX>3568</locationX>
        <locationY>955</locationY>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_commit</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>commit_task_updates</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_task_record</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Hubspot_Form</name>
        <label>Hubspot Form?</label>
        <locationX>490</locationX>
        <locationY>718</locationY>
        <defaultConnector>
            <targetReference>Outreach_activitydate_bug_check</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not a Form</defaultConnectorLabel>
        <rules>
            <name>Hubspot_Form_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Form Submission</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Moment_Created__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ActivityDate</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <dateValue>2023-01-01</dateValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Prefix_Assessment</targetReference>
            </connector>
            <label>Hubspot Form</label>
        </rules>
    </decisions>
    <decisions>
        <name>Journey_Found</name>
        <label>Journey Found?</label>
        <locationX>3273</locationX>
        <locationY>701</locationY>
        <defaultConnector>
            <targetReference>Commit_task_updates_dec</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_Journey</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Journey.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Close_Journey</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Outbound_SDR_Account_Activity</name>
        <label>Outbound SDR Account Activity</label>
        <locationX>1985</locationX>
        <locationY>52</locationY>
        <defaultConnector>
            <targetReference>Regie_ai_Reply_Connection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>X30_Days</name>
            <conditionLogic>(1 OR 2) AND 3</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account.Days_Since_Last_SDR_Activity__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>30.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.Days_Since_Last_SDR_Activity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_account_team_member.TeamMemberRole</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Outbound SDR</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Account_SDR_Activity</targetReference>
            </connector>
            <label>&gt; 30 Days</label>
        </rules>
    </decisions>
    <decisions>
        <name>Outreach_activitydate_bug_check</name>
        <label>Outreach activitydate bug check</label>
        <locationX>995</locationX>
        <locationY>716</locationY>
        <defaultConnector>
            <targetReference>Update_ROE_tracking</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_outreach_bug</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CreatedById</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>0056e00000CgKWZAA3</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ActivityDate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Patch_activity_date</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Prefix_Assessment</name>
        <label>Prefix Assessment</label>
        <locationX>752</locationX>
        <locationY>883</locationY>
        <defaultConnector>
            <targetReference>Alert_Regarding_Missing_Prefix</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Missing Prefix</defaultConnectorLabel>
        <rules>
            <name>Product_Form_True</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Subject</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>[Product]</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Subject</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>.developer-network</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Subject</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>Submitted Form &#39;Unidentified Form</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Subject</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>[Ignore]</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Outreach_activitydate_bug_check</targetReference>
            </connector>
            <label>Product Form</label>
        </rules>
        <rules>
            <name>Non_Product_Prefix</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Subject</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>Submitted Form &#39;[</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Should_an_MQL_be_checked</targetReference>
            </connector>
            <label>Non-Product Prefix</label>
        </rules>
    </decisions>
    <decisions>
        <name>Regie_ai_Reply_Connection</name>
        <label>Regie.ai Reply/Connection?</label>
        <locationX>2125</locationX>
        <locationY>318</locationY>
        <defaultConnector>
            <targetReference>Related_to</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_Regie</name>
            <conditionLogic>1 AND 8 AND (2 OR 3 OR 4 OR (5 AND (6 OR 7)))</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Outreach_Sequence_Name__c</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>Regie</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CallDisposition</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Answered - Meeting Set</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CallDisposition</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Answered - Set Follow Up</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CallDisposition</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Answered - Referral</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Message_Direction__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Received</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.TaskSubtype</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Email</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.TaskSubtype</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>LinkedIn</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Moment_Created__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Moment_0</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Related_to</name>
        <label>Related to?</label>
        <locationX>1802</locationX>
        <locationY>722</locationY>
        <defaultConnectorLabel>Lead</defaultConnectorLabel>
        <rules>
            <name>Contact</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.WhoId</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>003</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Stamp_account_attribution</targetReference>
            </connector>
            <label>Contact</label>
        </rules>
    </decisions>
    <decisions>
        <name>Should_an_MQL_be_checked</name>
        <label>Should an MQL be checked?</label>
        <locationX>884</locationX>
        <locationY>1070</locationY>
        <defaultConnector>
            <targetReference>Check_MQL_to_True</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Possible MQL</defaultConnectorLabel>
        <rules>
            <name>Not_an_MQL</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Subject</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>Submitted Form &#39;[Partner]</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Subject</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>Submitted Form &#39;[OLD]</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Subject</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>Submitted Form &#39;[PS]</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Subject</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>Submitted Form &#39;[Syndication]</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Subject</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>Submitted Form &#39;[Program]</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_MQL_to_False</targetReference>
            </connector>
            <label>Not an MQL</label>
        </rules>
    </decisions>
    <decisions>
        <name>Stamp_account_attribution</name>
        <label>Stamp account attribution?</label>
        <locationX>1799</locationX>
        <locationY>945</locationY>
        <defaultConnector>
            <targetReference>Suppression_Reason</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_stamp_account</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.AccountId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ActivityDate</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Flow.CurrentDate</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_account</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Suppression_Reason</name>
        <label>Suppression Reason?</label>
        <locationX>2285</locationX>
        <locationY>952</locationY>
        <defaultConnector>
            <targetReference>Commit_task_updates_dec</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>No_longer_at_company</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Subject</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>[Answered - No Longer with Company]</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Contact_No_longer_at_company</targetReference>
            </connector>
            <label>No longer at company</label>
        </rules>
        <rules>
            <name>Email_Hard_Bounce</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Bounced__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Contact</targetReference>
            </connector>
            <label>Email Hard Bounce</label>
        </rules>
    </decisions>
    <decisions>
        <name>Update_ROE_tracking</name>
        <label>Update ROE tracking?</label>
        <locationX>1423</locationX>
        <locationY>718</locationY>
        <defaultConnector>
            <targetReference>Related_to</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_ROE</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Is_ROE_Activity__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Owner:User.Is_integration_user__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_account_team_member</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Update_team_member_record</name>
        <label>Update team member record?</label>
        <locationX>1635</locationX>
        <locationY>312</locationY>
        <defaultConnector>
            <targetReference>Regie_ai_Reply_Connection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_found_team</name>
            <conditionLogic>1 AND (2 OR 3)</conditionLogic>
            <conditions>
                <leftValueReference>Get_account_team_member</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>most_recent_activity_date</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>Get_account_team_member.Most_Recent_Task_At__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_account_team_member.Most_Recent_Task_At__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_activity_tracking</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>- Adding updates to Contact &#39;Invalid Emails&#39; field when an email bounce occurs.</description>
    <environments>Default</environments>
    <formulas>
        <name>ContactId</name>
        <dataType>String</dataType>
        <expression>IF( LEFT({!$Record.WhoId}, 3) = &quot;003&quot;, {!$Record.WhoId}, &quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>InvalidEmails</name>
        <dataType>String</dataType>
        <expression>IF(
  ISBLANK({!Get_Contact.Invalid_Emails__c}),
  {!Get_Contact.Email},
  {!Get_Contact.Invalid_Emails__c} &amp; &quot;; &quot; &amp; {!Get_Contact.Email}
)</expression>
    </formulas>
    <formulas>
        <name>LeadId</name>
        <dataType>String</dataType>
        <expression>IF( LEFT( {!$Record.WhoId}, 3) = &quot;00Q&quot;, {!$Record.WhoId}, &quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>MomentContextRegie</name>
        <dataType>String</dataType>
        <expression>&quot;Reply from Contact in Regie.ai Sequence: &quot;&amp;{!$Record.Outreach_Sequence_Name__c}</expression>
    </formulas>
    <formulas>
        <name>MomentOccuredAt</name>
        <dataType>DateTime</dataType>
        <expression>IF( DATEVALUE({!$Record.CompletedDateTime}) = {!$Record.ActivityDate}, {!$Record.CompletedDateTime}, DATETIMEVALUE({!$Record.ActivityDate}+10/24))</expression>
    </formulas>
    <formulas>
        <name>MomentType</name>
        <dataType>String</dataType>
        <expression>IF(CONTAINS({!$Record.Subject}, &quot;[Demo]&quot;), &quot;Demo Request&quot;, &quot;Form Submission&quot;)</expression>
    </formulas>
    <formulas>
        <name>most_recent_activity_date</name>
        <dataType>Date</dataType>
        <expression>IF({!$Record.ActivityDate}&gt;{!Get_account_team_member.Most_Recent_Task_At__c} || ISBLANK({!Get_account_team_member.Most_Recent_Task_At__c}),{!$Record.ActivityDate},{!Get_account_team_member.Most_Recent_Task_At__c})</expression>
    </formulas>
    <formulas>
        <name>RestForDays</name>
        <dataType>Number</dataType>
        <expression>BLANKVALUE(VALUE(TEXT({!Get_Journey.Rest_For_Days__c})), 60)</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>RestUntil</name>
        <dataType>DateTime</dataType>
        <expression>{!$Flow.CurrentDateTime}+BLANKVALUE(VALUE(TEXT({!Get_Journey.Rest_For_Days__c})), 60)</expression>
    </formulas>
    <interviewLabel>Task - After Save {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Task - After Save Automations</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Moment</name>
        <label>Create Moment</label>
        <locationX>1384</locationX>
        <locationY>1195</locationY>
        <connector>
            <targetReference>Update_task_with_Created_Moment</targetReference>
        </connector>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Check_MQL__c</field>
            <value>
                <elementReference>MomentCheckMQL</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Contact__c</field>
            <value>
                <elementReference>ContactId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Created_From_Detail__c</field>
            <value>
                <stringValue>Task - After Save Automations</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Created_From__c</field>
            <value>
                <stringValue>Hubspot Form</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Lead__c</field>
            <value>
                <elementReference>LeadId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Moment_Context__c</field>
            <value>
                <elementReference>$Record.Description</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Moment_Description__c</field>
            <value>
                <elementReference>$Record.Subject</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Moment_Occurred_At__c</field>
            <value>
                <elementReference>MomentOccuredAt</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Moment_Type__c</field>
            <value>
                <elementReference>MomentType</elementReference>
            </value>
        </inputAssignments>
        <object>Moment__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_Moment_0</name>
        <label>Create Moment</label>
        <locationX>2353</locationX>
        <locationY>431</locationY>
        <connector>
            <targetReference>Update_task_with_Created_Moment_0</targetReference>
        </connector>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Check_MQL__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Contact__c</field>
            <value>
                <elementReference>ContactId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Created_From_Detail__c</field>
            <value>
                <stringValue>Task - After Save Automations</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Created_From__c</field>
            <value>
                <stringValue>Regie.ai</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Moment_Context__c</field>
            <value>
                <elementReference>MomentContextRegie</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Moment_Description__c</field>
            <value>
                <stringValue>Regie.ai reply</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Moment_Occurred_At__c</field>
            <value>
                <elementReference>MomentOccuredAt</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Moment_Type__c</field>
            <value>
                <stringValue>Regie.ai - Conversion</stringValue>
            </value>
        </inputAssignments>
        <object>Moment__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>Get_account</name>
        <label>Get account</label>
        <locationX>2109</locationX>
        <locationY>807</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Stamp_fields</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Account</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_account_team_member</name>
        <label>Get account team member</label>
        <locationX>1643</locationX>
        <locationY>501</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_team_member_record</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>AccountId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </filters>
        <filters>
            <field>UserId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.OwnerId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>AccountTeamMember</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Contact</name>
        <label>Get Contact</label>
        <locationX>2698</locationX>
        <locationY>584</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Contact_Email_Hard_Bounce</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Update_Contact_Email_Hard_Bounce</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WhoId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Contact</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Invalid_Emails__c</queriedFields>
        <queriedFields>Email</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Journey</name>
        <label>Get Journey</label>
        <locationX>3067</locationX>
        <locationY>584</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Journey_Found</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Contact__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WhoId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Is_Closed__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Journey__c</object>
        <sortField>Created_At__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Close_Journey</name>
        <label>Close Journey</label>
        <locationX>3576</locationX>
        <locationY>576</locationY>
        <connector>
            <targetReference>Commit_task_updates_dec</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Journey.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Closed_At__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Country_Definition_at_Close__c</field>
            <value>
                <elementReference>Get_Journey.Account__r.Country_Definition__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Employees_at_Close__c</field>
            <value>
                <elementReference>Get_Journey.Account__r.NumberOfEmployees</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Ended_Reason_Details__c</field>
            <value>
                <stringValue>Automatic from Task Record</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Ended_Reason__c</field>
            <value>
                <stringValue>Bad Contact Info</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Is_Closed__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Is_Resting__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Rest_For_Days__c</field>
            <value>
                <elementReference>RestForDays</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Rest_Until__c</field>
            <value>
                <elementReference>RestUntil</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Resting_At__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Segment_at_Close__c</field>
            <value>
                <elementReference>Get_Journey.Account__r.Segment__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Stage__c</field>
            <value>
                <stringValue>Ended</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Lost</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subregion_at_Close__c</field>
            <value>
                <elementReference>Get_Journey.Account__r.Country_Definition__r.Subregion__c</elementReference>
            </value>
        </inputAssignments>
        <object>Journey__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Commit_team_member</name>
        <label>Commit account team member</label>
        <locationX>1808</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>Outbound_SDR_Account_Activity</targetReference>
        </connector>
        <inputReference>Get_account_team_member</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Account_SDR_Activity</name>
        <label>Update Account SDR Activity</label>
        <locationX>2274</locationX>
        <locationY>53</locationY>
        <connector>
            <targetReference>Regie_ai_Reply_Connection</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Regie_ai_Reply_Connection</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Most_Recent_SDR_Activity__c</field>
            <value>
                <elementReference>most_recent_activity_date</elementReference>
            </value>
        </inputAssignments>
        <object>Account</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Contact_Email_Hard_Bounce</name>
        <label>Update Contact</label>
        <locationX>2877</locationX>
        <locationY>584</locationY>
        <connector>
            <targetReference>Get_Journey</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Get_Journey</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WhoId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Invalid_Emails__c</field>
            <value>
                <elementReference>InvalidEmails</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Suppression_Reason__c</field>
            <value>
                <stringValue>Email Hard Bounce</stringValue>
            </value>
        </inputAssignments>
        <object>Contact</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Contact_No_longer_at_company</name>
        <label>Update Contact</label>
        <locationX>3067</locationX>
        <locationY>767</locationY>
        <connector>
            <targetReference>Get_Journey</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WhoId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Suppression_Reason__c</field>
            <value>
                <stringValue>No longer at company</stringValue>
            </value>
        </inputAssignments>
        <object>Contact</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_task_record</name>
        <label>Update task</label>
        <locationX>3855</locationX>
        <locationY>952</locationY>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_task_with_Created_Moment</name>
        <label>Update task with Created Moment</label>
        <locationX>1384</locationX>
        <locationY>983</locationY>
        <connector>
            <targetReference>Outreach_activitydate_bug_check</targetReference>
        </connector>
        <inputAssignments>
            <field>Moment_Created__c</field>
            <value>
                <elementReference>Create_Moment</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_task_with_Created_Moment_0</name>
        <label>Update task with Created Moment</label>
        <locationX>2247</locationX>
        <locationY>555</locationY>
        <connector>
            <targetReference>Related_to</targetReference>
        </connector>
        <inputAssignments>
            <field>Moment_Created__c</field>
            <value>
                <elementReference>Create_Moment_0</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>372</locationX>
        <locationY>331</locationY>
        <connector>
            <targetReference>Hubspot_Form</targetReference>
        </connector>
        <object>Task</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <triggerOrder>2</triggerOrder>
    <variables>
        <name>commit_task_updates</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>MomentCheckMQL</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
