<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <apiVersion>52.0</apiVersion>
    <assignments>
        <name>Add_to_collection</name>
        <label>Add to collection</label>
        <locationX>1723</locationX>
        <locationY>528</locationY>
        <assignmentItems>
            <assignToReference>draft_li_collection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_through_line_items</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_through_line_items</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Build_putback</name>
        <label>Build putback</label>
        <locationX>572</locationX>
        <locationY>970</locationY>
        <assignmentItems>
            <assignToReference>putback_opp.AccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.AccountId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Debook_Putback_Details__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Ops_Notes_putback_reason</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Booking_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Putback</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Business_Unit__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Business_Unit__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Churn_Reason_Details__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Churn_Reason_Details__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Churn_Reason__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Churn_Reason__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.ContractId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.ContractId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Lost_Reason__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Lost_Reason__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Lost_Reason_Details__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Lost_Reason_Details__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PutbackName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Originating_Opportunity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>putback_originating_opp</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>putback_owner</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Plan_Name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Plan_Name__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Platform_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Platform_Type__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.RecordTypeId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Segment__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Segment__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.StageName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Putback_stage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Subtype__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Subtype__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Term_Number__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Term_Number__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Type</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Type</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.CloseDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Close_Date</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Renewal_Baseline_MRR__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Renewal_Baseline_MRR</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Permission_Check__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Debook_Putback_Reason__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Putback_Reason</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Debook_Putback_Group_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Employees_at_SQL__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Employees_at_SQL__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Employees_at_SQO__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Employees_at_SQO__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Employees_at_Close__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Employees_at_Close__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.BU_Name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.BU_Name__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Renewal_Baseline_ARR__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Renewal_Baseline_ARR_New</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Parent_Opportunity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Parent_Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Geo_Region__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Account.Shipping_Region__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Geo_Subregion__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Account.Shipping_Subregion__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Geo_Intermediate_Region__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Account.Shipping_Intermediate_Region__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Geo_Country__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Account.ShippingCountry</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Geo_Territory__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Account.Shipping_Territory__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Technical_Account_Manager__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Account.Technical_Account_Manager__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Customer_Success_Tier__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Account.Customer_Success_Tier__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Forecast_Method__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Automatic</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_sales_manager</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Finish_putback_no_line_items</name>
        <label>Finish putback - no line items</label>
        <locationX>1252</locationX>
        <locationY>1115</locationY>
        <assignmentItems>
            <assignToReference>putback_opp.Contract_End_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>End_Date</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Contract_Term__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Contract_Term</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Seats_Sold__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Seats_Sold</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Term_Start_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Start_Date</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Total_MRR__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Total_MRR</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Total_NRR__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Total_NRR</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Total_ARR__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Total_ARR</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_putback</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Finish_putback_with_line_items</name>
        <label>Finish putback - with line items</label>
        <locationX>1205</locationX>
        <locationY>945</locationY>
        <assignmentItems>
            <assignToReference>putback_opp.Contract_End_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>New_term_end_date</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Contract_Term__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>putback_term</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Term_Start_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId.Term_Start_Date__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_putback</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Modify_current_line_item</name>
        <label>Modify current line item</label>
        <locationX>1542</locationX>
        <locationY>417</locationY>
        <assignmentItems>
            <assignToReference>Loop_through_line_items.Id</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_through_line_items.TotalPrice</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_through_line_items.Term_mo__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>putback_Line_item_term</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_through_line_items.UnitPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>putback_line_item_salesprice</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_through_line_items.OpportunityId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>putback_opp.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_through_line_items.End_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>new_li_end_date</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_through_line_items.Manual_Dates__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_to_collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_closed_values</name>
        <label>Set closed values</label>
        <locationX>478</locationX>
        <locationY>822</locationY>
        <assignmentItems>
            <assignToReference>putback_opp.Close_Method__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Flow: Opportunity - Putback Deal</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Create_Method__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Flow: Opportunity - Putback Deal (Closed)</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Build_putback</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_manual_attribution</name>
        <label>Set manual attribution</label>
        <locationX>1056</locationX>
        <locationY>738</locationY>
        <assignmentItems>
            <assignToReference>putback_opp.Owner_Role__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>manual_attribution.firstSelectedRow.User_Role__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Owner_Department__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>manual_attribution.firstSelectedRow.Department__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Owner_Team__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>manual_attribution.firstSelectedRow.Team__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Owner_Subteam__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>manual_attribution.firstSelectedRow.Subteam__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Owner_Level__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>manual_attribution.firstSelectedRow.Level__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Owner_Segment__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>manual_attribution.firstSelectedRow.Opportunity_Segment__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Owner_Territory__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>manual_attribution.firstSelectedRow.Territory__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Owner_Region__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>manual_attribution.firstSelectedRow.Region__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Owner_Subregion__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>manual_attribution.firstSelectedRow.Subregion__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Copy_line_items_1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_originating_opp_equal_to_putback</name>
        <label>Set originating opp equal to putback</label>
        <locationX>3101</locationX>
        <locationY>859</locationY>
        <assignmentItems>
            <assignToReference>Get_open_renewal.Originating_Opportunity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>putback_opp.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_open_renewal.CloseDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>putback_opp.CloseDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_open_renewal</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_originating_opp_to_underlying_deal_putback</name>
        <label>Set originating opp to underlying deal putback</label>
        <locationX>392</locationX>
        <locationY>395</locationY>
        <assignmentItems>
            <assignToReference>putback_originating_opp</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_putback_for_underlying_deal.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_debook</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_sales_manager</name>
        <label>Set sales manager</label>
        <locationX>710</locationX>
        <locationY>977</locationY>
        <assignmentItems>
            <assignToReference>putback_opp.Sales_Manager__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>putback_opp.Owner.ManagerId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Putback_in</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_stage_5_stamp</name>
        <label>Set stage 5 values</label>
        <locationX>476</locationX>
        <locationY>1141</locationY>
        <assignmentItems>
            <assignToReference>putback_opp.Negotiation_At__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Close_Method__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Flow: Opportunity - Putback Deal (Stage 5)</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>putback_opp.Forecast_Method__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Manual</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Build_putback</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>acctownerchoice</name>
        <choiceText>Account Owner ({!recordId.Account.Owner.FirstName} &lt;span style=&quot;color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);&quot;&gt;{!recordId.Account.Owner.LastName}&lt;/span&gt;) {!acct_owner_inactive}</choiceText>
        <dataType>String</dataType>
        <value>
            <elementReference>recordId.Account.OwnerId</elementReference>
        </value>
    </choices>
    <choices>
        <name>opp_owner_choice</name>
        <choiceText>Opportunity Owner ({!recordId.Owner.FirstName} {!recordId.Owner.LastName}) {!opp_owner_inactive}</choiceText>
        <dataType>String</dataType>
        <value>
            <elementReference>recordId.OwnerId</elementReference>
        </value>
    </choices>
    <choices>
        <name>sf_admin_choice</name>
        <choiceText>Salesforce Admin</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>0055A00000ApunnQAB</stringValue>
        </value>
    </choices>
    <choices>
        <name>stage_churn</name>
        <choiceText>Churn</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Churn</stringValue>
        </value>
    </choices>
    <choices>
        <name>stage_closed_won</name>
        <choiceText>Closed Won</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Closed Won</stringValue>
        </value>
    </choices>
    <choices>
        <name>stage_open</name>
        <choiceText>Open: (5) Validating Business Case/Negotiating</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>(5) Validating Business Case/Negotiating</stringValue>
        </value>
    </choices>
    <decisions>
        <name>Copy_line_items_1</name>
        <label>Copy line items?</label>
        <locationX>974</locationX>
        <locationY>973</locationY>
        <defaultConnector>
            <targetReference>Configure_Putback</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_copy_li</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Copy_line_items</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Finish_putback_with_line_items</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Copy_line_items_1_0</name>
        <label>Copy line items?</label>
        <locationX>1491</locationX>
        <locationY>986</locationY>
        <defaultConnector>
            <targetReference>Is_churn_putback</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_copy_li_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Copy_line_items</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_line_items</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_open_renewal</name>
        <label>Found open renewal?</label>
        <locationX>2675</locationX>
        <locationY>1011</locationY>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_found_renewal</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_open_renewal</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Putback_is</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_putback</name>
        <label>Found putback?</label>
        <locationX>678</locationX>
        <locationY>406</locationY>
        <defaultConnector>
            <targetReference>error_no_underlying</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Ye</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_putback_for_underlying_deal</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_originating_opp_to_underlying_deal_putback</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_churn_putback</name>
        <label>Is churn putback?</label>
        <locationX>1910</locationX>
        <locationY>995</locationY>
        <defaultConnector>
            <targetReference>Opp_is_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Prepare_putback_for_churn</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Pause_BU_autobookings</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Opp_is</name>
        <label>Opp is</label>
        <locationX>205</locationX>
        <locationY>257</locationY>
        <defaultConnector>
            <targetReference>Get_putback_for_underlying_deal</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not booking base</defaultConnectorLabel>
        <rules>
            <name>Booking_Base</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId.Is_Booking_Base__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_debook</targetReference>
            </connector>
            <label>Booking Base</label>
        </rules>
        <rules>
            <name>Professional_Services</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId.RecordType.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Professional Services</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_debook</targetReference>
            </connector>
            <label>Professional Services</label>
        </rules>
    </decisions>
    <decisions>
        <name>Opp_is_0</name>
        <label>Opp is</label>
        <locationX>2290</locationX>
        <locationY>1014</locationY>
        <defaultConnectorLabel>Not booking base</defaultConnectorLabel>
        <rules>
            <name>Booking_Base_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId.Is_Booking_Base__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_open_renewal</targetReference>
            </connector>
            <label>Booking Base</label>
        </rules>
    </decisions>
    <decisions>
        <name>Putback_in</name>
        <label>Putback in</label>
        <locationX>817</locationX>
        <locationY>979</locationY>
        <defaultConnector>
            <targetReference>Copy_line_items_1</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Other</defaultConnectorLabel>
        <rules>
            <name>Salesforce_Admin</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>putback_owner</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>sf_admin_choice</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_active_ROE_rules</targetReference>
            </connector>
            <label>Salesforce Admin</label>
        </rules>
    </decisions>
    <decisions>
        <name>Putback_is</name>
        <label>Putback is</label>
        <locationX>2896</locationX>
        <locationY>994</locationY>
        <defaultConnector>
            <targetReference>Delete_open_renewal</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Open</defaultConnectorLabel>
        <rules>
            <name>Closed_Putback</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>putback_opp.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed Won</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_originating_opp_equal_to_putback</targetReference>
            </connector>
            <label>Closed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Stage_is</name>
        <label>Stage is</label>
        <locationX>363</locationX>
        <locationY>978</locationY>
        <defaultConnector>
            <targetReference>Set_closed_values</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Closed Won</defaultConnectorLabel>
        <rules>
            <name>Stage_5</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Putback_stage</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>stage_open</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_stage_5_stamp</targetReference>
            </connector>
            <label>Stage 5</label>
        </rules>
    </decisions>
    <description>Set automatic forecast</description>
    <dynamicChoiceSets>
        <name>debook_reasons</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>Debook_Putback_Reason__c</picklistField>
        <picklistObject>Opportunity</picklistObject>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <formulas>
        <name>acct_owner_inactive</name>
        <dataType>String</dataType>
        <expression>if({!recordId.Account.Owner.IsActive},NULL,&quot;(INACTIVE)&quot;)</expression>
    </formulas>
    <formulas>
        <name>default_seats_sold</name>
        <dataType>Number</dataType>
        <expression>IF(
 {!Prepare_putback_for_churn},
 {!recordId.Business_Unit__r.Total_Seats__c}*-1,
 IF(ISBLANK({!recordId.Seats_Sold__c}),0,{!recordId.Seats_Sold__c})
)</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>default_total_arr</name>
        <dataType>Currency</dataType>
        <expression>IF(
 {!Prepare_putback_for_churn},
 0,
 IF(ISBLANK({!recordId.Total_ARR__c}),0,{!recordId.Total_ARR__c})
)</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>default_total_mrr</name>
        <dataType>Currency</dataType>
        <expression>IF(
 {!Prepare_putback_for_churn},
 0,
 IF(ISBLANK({!recordId.Total_MRR__c}),0,{!recordId.Total_MRR__c})
)</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>default_total_NRR</name>
        <dataType>Currency</dataType>
        <expression>IF(
 {!Prepare_putback_for_churn},
 0,
 IF(ISBLANK({!recordId.Total_NRR__c}),0,{!recordId.Total_NRR__c})
)</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>new_li_end_date</name>
        <dataType>Date</dataType>
        <expression>IF({!Loop_through_line_items.End_Date__c}&lt;{!New_term_end_date},{!Loop_through_line_items.End_Date__c},{!New_term_end_date})</expression>
    </formulas>
    <formulas>
        <name>open_renewal_new_end_date</name>
        <dataType>Date</dataType>
        <expression>ADDMONTHS({!open_renewal_new_start_date},{!recordId.Contract.ContractTerm})-1</expression>
    </formulas>
    <formulas>
        <name>open_renewal_new_start_date</name>
        <dataType>Date</dataType>
        <expression>{!putback_opp.Contract_End_Date__c}+1</expression>
    </formulas>
    <formulas>
        <name>opp_owner_inactive</name>
        <dataType>String</dataType>
        <expression>if({!recordId.Owner.IsActive},NULL,&quot;(INACTIVE)&quot;)</expression>
    </formulas>
    <formulas>
        <name>putback_line_item_salesprice</name>
        <dataType>Currency</dataType>
        <expression>({!Loop_through_line_items.UnitPrice} / {!Loop_through_line_items.Term_mo__c}) * {!putback_Line_item_term}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>putback_Line_item_term</name>
        <dataType>Number</dataType>
        <expression>ROUND(
 ({!new_li_end_date}-{!Loop_through_line_items.ServiceDate}+1)/30.43685,
 VALUE(TEXT({!Loop_through_line_items.Term_Precision__c}))
)</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>putback_term</name>
        <dataType>Number</dataType>
        <expression>ROUND(({!New_term_end_date}-{!recordId.Term_Start_Date__c}+1)/30.43685,0)</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>PutbackName</name>
        <dataType>String</dataType>
        <expression>&quot;PUTBACK - &quot;&amp;{!recordId.Name}</expression>
    </formulas>
    <interviewLabel>Opportunity - Putback Deal {!$Flow.CurrentDateTime} {!recordId.Name}</interviewLabel>
    <label>Opportunity - Putback Deal</label>
    <loops>
        <name>Loop_through_line_items</name>
        <label>Loop through line items</label>
        <locationX>1537</locationX>
        <locationY>645</locationY>
        <collectionReference>Get_line_items</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Modify_current_line_item</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_putback_line_items</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_putback</name>
        <label>Create putback</label>
        <locationX>1338</locationX>
        <locationY>970</locationY>
        <connector>
            <targetReference>Copy_line_items_1_0</targetReference>
        </connector>
        <inputReference>putback_opp</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_putback_line_items</name>
        <label>Create putback line items</label>
        <locationX>1715</locationX>
        <locationY>825</locationY>
        <connector>
            <targetReference>Is_churn_putback</targetReference>
        </connector>
        <inputReference>draft_li_collection</inputReference>
    </recordCreates>
    <recordDeletes>
        <name>Delete_open_renewal</name>
        <label>Delete open renewal</label>
        <locationX>3128</locationX>
        <locationY>1152</locationY>
        <inputReference>Get_open_renewal</inputReference>
    </recordDeletes>
    <recordLookups>
        <name>Get_active_ROE_rules</name>
        <label>Get active ROE rules</label>
        <locationX>811</locationX>
        <locationY>774</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Select_Manual_Attribution</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Active</stringValue>
            </value>
        </filters>
        <filters>
            <field>Can_Own_Accounts__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>ROE_Rule__c</object>
        <sortField>Name</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_debook</name>
        <label>Get debook</label>
        <locationX>216</locationX>
        <locationY>501</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Configure_Putback_pre</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Originating_Opportunity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Booking_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Debook</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_line_items</name>
        <label>Get line items</label>
        <locationX>1544</locationX>
        <locationY>791</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_through_line_items</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OpportunityId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>OpportunityLineItem</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_open_renewal</name>
        <label>Get open renewal</label>
        <locationX>2512</locationX>
        <locationY>1008</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Found_open_renewal</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Originating_Opportunity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Opportunity_Record_Type_Name__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Renewal</stringValue>
            </value>
        </filters>
        <filters>
            <field>IsClosed</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_putback_for_underlying_deal</name>
        <label>Get putback for underlying deal</label>
        <locationX>554</locationX>
        <locationY>252</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Found_putback</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Debook_Putback_Group_ID__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId.Originating_Opportunity__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Booking_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Putback</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Pause_BU_autobookings</name>
        <label>Pause BU autobookings</label>
        <locationX>2142</locationX>
        <locationY>829</locationY>
        <connector>
            <targetReference>Opp_is_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId.Business_Unit__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Pause_Automatic_Bookings_Reason__c</field>
            <value>
                <stringValue>Customer churn</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Pause_Automatic_Bookings__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Require_manual_resume_of_auto_bookings__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Resume_Automatic_Bookings_On__c</field>
        </inputAssignments>
        <object>Business_Unit__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_open_renewal</name>
        <label>Update open renewal</label>
        <locationX>3280</locationX>
        <locationY>859</locationY>
        <connector>
            <targetReference>Recalculate_baselines</targetReference>
        </connector>
        <inputReference>Get_open_renewal</inputReference>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <screens>
        <name>Configure_Putback</name>
        <label>Configure Putback (No Line Items)</label>
        <locationX>1108</locationX>
        <locationY>1112</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Finish_putback_no_line_items</targetReference>
        </connector>
        <fields>
            <name>Contract_Term_Header</name>
            <fieldText>&lt;p&gt;&lt;strong&gt;Contract&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Configure_Putback_Section1</name>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Configure_Putback_Section1_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Start_Date</name>
                    <dataType>Date</dataType>
                    <defaultValue>
                        <elementReference>recordId.Term_Start_Date__c</elementReference>
                    </defaultValue>
                    <fieldText>Start Date</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>Seats_Sold</name>
                    <dataType>Number</dataType>
                    <defaultValue>
                        <elementReference>default_seats_sold</elementReference>
                    </defaultValue>
                    <fieldText>Seats Sold</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <scale>0</scale>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Configure_Putback_Section1_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>End_Date</name>
                    <dataType>Date</dataType>
                    <defaultValue>
                        <elementReference>recordId.Contract_End_Date__c</elementReference>
                    </defaultValue>
                    <fieldText>End Date</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>Contract_Term</name>
                    <dataType>Number</dataType>
                    <defaultValue>
                        <elementReference>recordId.Contract_Term__c</elementReference>
                    </defaultValue>
                    <fieldText>Contract Term</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <scale>0</scale>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithoutHeader</regionContainerType>
        </fields>
        <fields>
            <name>Revenue_ARR</name>
            <fieldText>&lt;p&gt;&lt;strong&gt;Revenue&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Configure_Putback_Section2</name>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Configure_Putback_Section2_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Total_ARR</name>
                    <dataType>Currency</dataType>
                    <defaultValue>
                        <elementReference>default_total_arr</elementReference>
                    </defaultValue>
                    <fieldText>Total ARR</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <scale>2</scale>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Configure_Putback_Section2_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Total_MRR</name>
                    <dataType>Currency</dataType>
                    <defaultValue>
                        <elementReference>default_total_mrr</elementReference>
                    </defaultValue>
                    <fieldText>Total MRR</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <scale>2</scale>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Configure_Putback_Section2_Column3</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Total_NRR</name>
                    <dataType>Currency</dataType>
                    <defaultValue>
                        <elementReference>default_total_NRR</elementReference>
                    </defaultValue>
                    <fieldText>Total NRR</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <scale>2</scale>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithoutHeader</regionContainerType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Configure_Putback_pre</name>
        <label>Configure Putback (Step 1)</label>
        <locationX>227</locationX>
        <locationY>971</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Stage_is</targetReference>
        </connector>
        <fields>
            <name>Configure_Putback_pre_Section1</name>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Configure_Putback_pre_Section1_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Close_Date</name>
                    <dataType>Date</dataType>
                    <defaultValue>
                        <elementReference>$Flow.CurrentDate</elementReference>
                    </defaultValue>
                    <fieldText>Close Date</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Configure_Putback_pre_Section1_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Renewal_Baseline_ARR_New</name>
                    <dataType>Currency</dataType>
                    <defaultValue>
                        <elementReference>recordId.Renewal_Baseline_ARR__c</elementReference>
                    </defaultValue>
                    <fieldText>Renewal Baseline ARR</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <scale>2</scale>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>recordId.RecordType.Name</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>Renewal</stringValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <fields>
                    <name>Renewal_Baseline_MRR</name>
                    <dataType>Currency</dataType>
                    <defaultValue>
                        <elementReference>recordId.Renewal_Baseline_MRR__c</elementReference>
                    </defaultValue>
                    <fieldText>Renewal Baseline MRR</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <scale>2</scale>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>recordId.RecordType.Name</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>Renewal</stringValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithoutHeader</regionContainerType>
        </fields>
        <fields>
            <name>Putback_stage</name>
            <choiceReferences>stage_closed_won</choiceReferences>
            <choiceReferences>stage_open</choiceReferences>
            <dataType>String</dataType>
            <defaultSelectedChoiceReference>stage_closed_won</defaultSelectedChoiceReference>
            <fieldText>Create putback in stage:</fieldText>
            <fieldType>RadioButtons</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Prepare_putback_for_churn</name>
            <dataType>Boolean</dataType>
            <defaultValue>
                <booleanValue>false</booleanValue>
            </defaultValue>
            <fieldText>Prepare putback for churn?</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>recordId.RecordType.Name</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Renewal</stringValue>
                    </rightValue>
                </conditions>
                <conditions>
                    <leftValueReference>Putback_stage</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>stage_open</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>Configure_Putback_pre_Section2</name>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Configure_Putback_pre_Section2_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Copy_line_items</name>
                    <dataType>Boolean</dataType>
                    <defaultValue>
                        <elementReference>recordId.HasOpportunityLineItem</elementReference>
                    </defaultValue>
                    <fieldText>Copy line items?</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>Putback_stage</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <elementReference>stage_closed_won</elementReference>
                            </rightValue>
                        </conditions>
                        <conditions>
                            <leftValueReference>recordId.HasOpportunityLineItem</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <booleanValue>true</booleanValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Configure_Putback_pre_Section2_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>New_term_end_date</name>
                    <dataType>Date</dataType>
                    <defaultValue>
                        <elementReference>recordId.Contract_End_Date__c</elementReference>
                    </defaultValue>
                    <fieldText>New service term end date:</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>Copy_line_items</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <booleanValue>true</booleanValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithoutHeader</regionContainerType>
        </fields>
        <fields>
            <name>putback_owner</name>
            <choiceReferences>acctownerchoice</choiceReferences>
            <choiceReferences>opp_owner_choice</choiceReferences>
            <choiceReferences>sf_admin_choice</choiceReferences>
            <dataType>String</dataType>
            <defaultSelectedChoiceReference>acctownerchoice</defaultSelectedChoiceReference>
            <fieldText>Set putback owner (generally set to current account owner):</fieldText>
            <fieldType>RadioButtons</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Putback_Reason</name>
            <choiceReferences>debook_reasons</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>Get_debook.Debook_Putback_Reason__c</elementReference>
            </defaultValue>
            <fieldText>Putback Reason</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Ops_Notes_putback_reason</name>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>Get_debook.Debook_Putback_Details__c</elementReference>
            </defaultValue>
            <fieldText>Putback Reason Details</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>error_no_underlying</name>
        <label>Error: No Underlying Deal Putback Found</label>
        <locationX>688</locationX>
        <locationY>588</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Get_debook</targetReference>
        </connector>
        <fields>
            <name>error_no_underlying_putback</name>
            <fieldText>&lt;p&gt;&lt;strong&gt;WARNING&lt;/strong&gt;: You are attempting to create a putback for an expansion opportunity but the underlying deal putback could not be found. Please process the putback of the underlying deal first:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://retool.lightning.force.com/%7B!recordId.Originating_Opportunity__c%7D&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;{!recordId.Originating_Opportunity__r.Name}&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Proceed &lt;u&gt;only&lt;/u&gt; if you are putting back an expansion due to a billing error. If you&#39;re not sure, ask Jon.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Select_Manual_Attribution</name>
        <label>Select Manual Attribution</label>
        <locationX>905</locationX>
        <locationY>687</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Set_manual_attribution</targetReference>
        </connector>
        <fields>
            <name>manual_attrib_header</name>
            <fieldText>&lt;p&gt;&lt;strong&gt;Original Deal Owner:&lt;/strong&gt; {!recordId.Owner.FirstName} &lt;span style=&quot;color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);&quot;&gt;{!recordId.Owner.LastName} ({!recordId.Owner.FirstName} ({!recordId.Owner.Role_Name__c}) {!opp_owner_inactive}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Account Owner: &lt;/strong&gt;{!recordId.Account.Owner.FirstName} &lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;{!recordId.Account.Owner.LastName} ({!recordId.Account.Owner.Role_Name__c}) {!acct_owner_inactive}&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>manual_attribution</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>ROE_Rule__c</typeValue>
            </dataTypeMappings>
            <extensionName>flowruntime:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Select the role to which this booking should be attributed</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectionMode</name>
                <value>
                    <stringValue>SINGLE_SELECT</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>minRowSelection</name>
                <value>
                    <numberValue>1.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>shouldDisplayLabel</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>Get_active_ROE_rules</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>maxRowSelection</name>
                <value>
                    <numberValue>1.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columns</name>
                <value>
                    <stringValue>[{&quot;apiName&quot;:&quot;Name&quot;,&quot;guid&quot;:&quot;column-886f&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:0,&quot;label&quot;:&quot;ROE Rules Name&quot;,&quot;type&quot;:&quot;text&quot;},{&quot;apiName&quot;:&quot;Team__c&quot;,&quot;guid&quot;:&quot;column-e1d8&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Team&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:1,&quot;label&quot;:&quot;Team&quot;,&quot;type&quot;:&quot;text&quot;},{&quot;apiName&quot;:&quot;Subteam__c&quot;,&quot;guid&quot;:&quot;column-2aff&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Subteam&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:2,&quot;label&quot;:&quot;Subteam&quot;,&quot;type&quot;:&quot;text&quot;},{&quot;apiName&quot;:&quot;Level__c&quot;,&quot;guid&quot;:&quot;column-9c7d&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Level&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:3,&quot;label&quot;:&quot;Level&quot;,&quot;type&quot;:&quot;text&quot;},{&quot;apiName&quot;:&quot;Territory__c&quot;,&quot;guid&quot;:&quot;column-b46d&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Territory&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:4,&quot;label&quot;:&quot;Territory&quot;,&quot;type&quot;:&quot;text&quot;}]</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>isShowSearchBar</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>108</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>Opp_is</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <name>Recalculate_baselines</name>
        <label>Recalculate baselines</label>
        <locationX>3441</locationX>
        <locationY>866</locationY>
        <flowName>Opportunity_Update_Renewal_Baselines</flowName>
        <inputAssignments>
            <name>opp_record_updated</name>
            <value>
                <elementReference>Get_open_renewal</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <variables>
        <name>draft_li_collection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>putback_opp</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>putback_originating_opp</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <elementReference>recordId.Originating_Opportunity__c</elementReference>
        </value>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
</Flow>
