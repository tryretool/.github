<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>54.0</apiVersion>
    <assignments>
        <name>Assign_BU_to_key</name>
        <label>Assign BU to key</label>
        <locationX>4008</locationX>
        <locationY>364</locationY>
        <assignmentItems>
            <assignToReference>$Record.Business_Unit__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Look_for_BU.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Look_for_BU.Account__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Opp_isf</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Clear_BU</name>
        <label>Clear BU / opp</label>
        <locationX>2710</locationX>
        <locationY>400</locationY>
        <assignmentItems>
            <assignToReference>$Record.Business_Unit__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Opportunity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>0015A00002NSnxVQAT</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Partner_Relationship__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_all_orgs_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Clear_triage_status</name>
        <label>Clear triage status?</label>
        <locationX>5405</locationX>
        <locationY>432</locationY>
        <assignmentItems>
            <assignToReference>$Record.Triage_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Clear_expired_status</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Clear_triage_status_0</name>
        <label>Clear triage status?</label>
        <locationX>5706</locationX>
        <locationY>511</locationY>
        <assignmentItems>
            <assignToReference>$Record.Triage_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Account_is_r</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_account_from_found_contact</name>
        <label>Set account from found contact</label>
        <locationX>1175</locationX>
        <locationY>332</locationY>
        <assignmentItems>
            <assignToReference>$Record.Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Search_for_contact.AccountId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Partner_Relationship_is</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_account_from_found_contact_0</name>
        <label>Set account from found contact</label>
        <locationX>1414</locationX>
        <locationY>128</locationY>
        <assignmentItems>
            <assignToReference>$Record.Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Search_domain_map.Matched_Account__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Partner_Relationship_is</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_opp</name>
        <label>Set opp</label>
        <locationX>1251</locationX>
        <locationY>886</locationY>
        <assignmentItems>
            <assignToReference>$Record.Opportunity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Look_for_opportunity_by_name.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Look_for_opportunity_by_name.AccountId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Business_Unit__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Look_for_opportunity_by_name.Business_Unit__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_all_orgs_0_0_0_0_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_status_to_Internal</name>
        <label>Set status to Internal</label>
        <locationX>5960</locationX>
        <locationY>454</locationY>
        <assignmentItems>
            <assignToReference>$Record.Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Internal</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Retool_License</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Account_from_BU</name>
        <label>Update Account from BU</label>
        <locationX>2460</locationX>
        <locationY>513</locationY>
        <assignmentItems>
            <assignToReference>$Record.Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Business_Unit__r.Account__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Status_is</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_BU_from_opp</name>
        <label>Update BU opp</label>
        <locationX>2025</locationX>
        <locationY>451</locationY>
        <assignmentItems>
            <assignToReference>$Record.Business_Unit__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Business_Unit__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Opportunity__r.AccountId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>BU_is</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_from_partner_relationship</name>
        <label>Update from partner relationship</label>
        <locationX>1542</locationX>
        <locationY>452</locationY>
        <assignmentItems>
            <assignToReference>$Record.Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Partner</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Business_Unit__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Opportunity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Partner_Relationship__r.Account__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_all_orgs_0_0_0_0_0</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Account_is</name>
        <label>Account is</label>
        <locationX>680</locationX>
        <locationY>474</locationY>
        <defaultConnector>
            <targetReference>Partner_Relationship_is</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not Blank</defaultConnectorLabel>
        <rules>
            <name>Blank_f</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Search_for_contact</targetReference>
            </connector>
            <label>Blank</label>
        </rules>
        <rules>
            <name>Orphan</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__r.Automatically_Reparent_Entities__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Search_for_contact</targetReference>
            </connector>
            <label>Orphan</label>
        </rules>
    </decisions>
    <decisions>
        <name>Account_is_r</name>
        <label>Account is</label>
        <locationX>5846</locationX>
        <locationY>651</locationY>
        <defaultConnector>
            <targetReference>Update_Retool_License</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Other</defaultConnectorLabel>
        <rules>
            <name>Retool</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__r.Is_Retool_Account__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_status_to_Internal</targetReference>
            </connector>
            <label>Retool</label>
        </rules>
    </decisions>
    <decisions>
        <name>Account_isf</name>
        <label>Account is</label>
        <locationX>4656</locationX>
        <locationY>813</locationY>
        <defaultConnector>
            <targetReference>Key_is_triaged</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not changed</defaultConnectorLabel>
        <rules>
            <name>Changed_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_all_orgs_0_0_0</targetReference>
            </connector>
            <label>Changed and not blank</label>
        </rules>
        <rules>
            <name>Blank_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_all_orgs_0_0_0_0</targetReference>
            </connector>
            <label>Changed and blank</label>
        </rules>
    </decisions>
    <decisions>
        <name>BU_is</name>
        <label>BU is</label>
        <locationX>2208</locationX>
        <locationY>616</locationY>
        <defaultConnector>
            <targetReference>Status_is</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Blank</defaultConnectorLabel>
        <rules>
            <name>Not_Blan_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Business_Unit__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Account_from_BU</targetReference>
            </connector>
            <label>Not Blank</label>
        </rules>
    </decisions>
    <decisions>
        <name>Business_Unit_changed</name>
        <label>Business Unit is</label>
        <locationX>4246</locationX>
        <locationY>659</locationY>
        <defaultConnector>
            <targetReference>Account_isf</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not changed</defaultConnectorLabel>
        <rules>
            <name>Changed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Business_Unit__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Business_Unit__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_all_orgs</targetReference>
            </connector>
            <label>Changed and not blank</label>
        </rules>
        <rules>
            <name>Blank</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Business_Unit__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Business_Unit__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_all_orgs_0</targetReference>
            </connector>
            <label>Changed and blank</label>
        </rules>
    </decisions>
    <decisions>
        <name>Clear_expired_status</name>
        <label>Clear expired status?</label>
        <locationX>5495</locationX>
        <locationY>647</locationY>
        <defaultConnector>
            <targetReference>Account_is_r</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_expired</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Is_Expired__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Triage_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Expire</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Clear_triage_status_0</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_BU</name>
        <label>Found BU?</label>
        <locationX>3785</locationX>
        <locationY>387</locationY>
        <defaultConnector>
            <targetReference>Opp_isf</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Look_for_BU</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_BU_to_key</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_contact</name>
        <label>Found contact?</label>
        <locationX>1023</locationX>
        <locationY>336</locationY>
        <defaultConnector>
            <targetReference>Search_domain_map</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Search_for_contact</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_account_from_found_contact</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_Domain_Mapg</name>
        <label>Found Domain Map?</label>
        <locationX>1244</locationX>
        <locationY>45</locationY>
        <defaultConnector>
            <targetReference>Partner_Relationship_is</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_found_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Search_domain_map</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_account_from_found_contact_0</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_opp_by_name</name>
        <label>Found opp by name?</label>
        <locationX>1059</locationX>
        <locationY>846</locationY>
        <defaultConnector>
            <targetReference>Partner_Relationship_is</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_fd</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Look_for_opportunity_by_name</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_opp</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Key_is_triaged</name>
        <label>Key is triaged?</label>
        <locationX>5125</locationX>
        <locationY>516</locationY>
        <defaultConnector>
            <targetReference>Clear_expired_status</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_triaged</name>
            <conditionLogic>1 AND (2 OR 3 OR 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Triage_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Needs Review</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Business_Unit__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Opportunity__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Partner_Relationship__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Clear_triage_status</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Key_Type_is</name>
        <label>Key Type is</label>
        <locationX>539</locationX>
        <locationY>661</locationY>
        <defaultConnector>
            <targetReference>Record_is</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Other</defaultConnectorLabel>
        <rules>
            <name>SSOP</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Key_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SSOP</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Account_is</targetReference>
            </connector>
            <label>SSOP</label>
        </rules>
    </decisions>
    <decisions>
        <name>Number_of_active_BUs_on_account</name>
        <label>Number of active BUs on account?</label>
        <locationX>3368</locationX>
        <locationY>374</locationY>
        <defaultConnector>
            <targetReference>Opp_isf</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Other</defaultConnectorLabel>
        <rules>
            <name>X1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Retool_Org.Account__r.Num_Active_Committed_BUs__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Look_for_BU</targetReference>
            </connector>
            <label>1</label>
        </rules>
    </decisions>
    <decisions>
        <name>Opp_is</name>
        <label>Opp is</label>
        <locationX>1823</locationX>
        <locationY>603</locationY>
        <defaultConnector>
            <targetReference>BU_is</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Blank</defaultConnectorLabel>
        <rules>
            <name>Not_Blan</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Opportunity__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_BU_from_opp</targetReference>
            </connector>
            <label>Not Blank</label>
        </rules>
    </decisions>
    <decisions>
        <name>Opp_isf</name>
        <label>Opp is</label>
        <locationX>3948</locationX>
        <locationY>659</locationY>
        <defaultConnector>
            <targetReference>Business_Unit_changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Other</defaultConnectorLabel>
        <rules>
            <name>Change_and_not_blank</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Opportunity__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_all_orgs</targetReference>
            </connector>
            <label>Change and not blank</label>
        </rules>
    </decisions>
    <decisions>
        <name>Partner_Relationship_is</name>
        <label>Partner Relationship is</label>
        <locationX>1391</locationX>
        <locationY>647</locationY>
        <defaultConnector>
            <targetReference>Opp_is</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Blank</defaultConnectorLabel>
        <rules>
            <name>Not_Blank</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Partner_Relationship__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Partner_Relationship__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_from_partner_relationship</targetReference>
            </connector>
            <label>Not Blank</label>
        </rules>
    </decisions>
    <decisions>
        <name>Record_is</name>
        <label>Record is</label>
        <locationX>883</locationX>
        <locationY>661</locationY>
        <defaultConnector>
            <targetReference>Partner_Relationship_is</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Updated</defaultConnectorLabel>
        <rules>
            <name>New</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Look_for_opportunity_by_name</targetReference>
            </connector>
            <label>New</label>
        </rules>
    </decisions>
    <decisions>
        <name>Search_for_BU</name>
        <label>Search for BU?</label>
        <locationX>3200</locationX>
        <locationY>616</locationY>
        <defaultConnector>
            <targetReference>Opp_isf</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_search</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Is_Expired__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Business_Unit__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Customer</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Key_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Self-hosted</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Num_of_Retool_Orgs__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Retool_Org</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Status_is</name>
        <label>Status is</label>
        <locationX>2700</locationX>
        <locationY>620</locationY>
        <defaultConnector>
            <targetReference>Search_for_BU</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Other</defaultConnectorLabel>
        <rules>
            <name>Changed_to_Internal</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Internal</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Clear_BU</targetReference>
            </connector>
            <label>Changed to Internal</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>company_name_domain</name>
        <dataType>String</dataType>
        <expression>RIGHT({!$Record.Company_Name__c}, LEN({!$Record.Company_Name__c}) - FIND(&quot;@&quot;,{!$Record.Company_Name__c}))</expression>
    </formulas>
    <interviewLabel>Retool License - Before Save Automations {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Retool License - After Save Automations</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Retool_Org</name>
        <label>Get Retool Org with highest usage</label>
        <locationX>3208</locationX>
        <locationY>371</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Number_of_active_BUs_on_account</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Retool_License__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Account_Status_Committed__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Active Customer</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Retool_Org__c</object>
        <sortField>Num_Users_Active_L30D__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Look_for_BU</name>
        <label>Look for BU</label>
        <locationX>3730</locationX>
        <locationY>219</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Found_BU</targetReference>
        </connector>
        <filterLogic>1 AND 2 AND (3 OR 6) AND (4 OR 5)</filterLogic>
        <filters>
            <field>Account__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Retool_Org.Account__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>BU_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Active</stringValue>
            </value>
        </filters>
        <filters>
            <field>Num_Retool_Licenses__c</field>
            <operator>EqualTo</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </filters>
        <filters>
            <field>Platform_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Self-hosted</stringValue>
            </value>
        </filters>
        <filters>
            <field>Platform_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Managed Cloud</stringValue>
            </value>
        </filters>
        <filters>
            <field>Num_Retool_Licenses__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Business_Unit__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Look_for_opportunity_by_name</name>
        <label>Look for opportunity by name</label>
        <locationX>889</locationX>
        <locationY>847</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Found_opp_by_name</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Company_Name__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Search_domain_map</name>
        <label>Search domain map</label>
        <locationX>1016</locationX>
        <locationY>92</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Found_Domain_Mapg</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Matched_Account__c</field>
            <operator>NotEqualTo</operator>
        </filters>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>company_name_domain</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Domain_Map__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Search_for_contact</name>
        <label>Search for contact</label>
        <locationX>878</locationX>
        <locationY>333</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Found_contact</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Email</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Company_Name__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Contact</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_all_orgs</name>
        <label>Update all orgs from opp</label>
        <locationX>4338</locationX>
        <locationY>319</locationY>
        <connector>
            <targetReference>Key_is_triaged</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Retool_License__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>$Record.Account__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Business_Unit__c</field>
            <value>
                <elementReference>$Record.Business_Unit__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Customer</stringValue>
            </value>
        </inputAssignments>
        <object>Retool_Org__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_all_orgs_0</name>
        <label>Update all orgs</label>
        <locationX>4513</locationX>
        <locationY>525</locationY>
        <connector>
            <targetReference>Key_is_triaged</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Retool_License__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>$Record.Account__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Business_Unit__c</field>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Customer</stringValue>
            </value>
        </inputAssignments>
        <object>Retool_Org__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_all_orgs_0_0</name>
        <label>Update all orgs</label>
        <locationX>2916</locationX>
        <locationY>401</locationY>
        <connector>
            <targetReference>Search_for_BU</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Retool_License__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <stringValue>0015A00002NSnxVQAT</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Business_Unit__c</field>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Internal</stringValue>
            </value>
        </inputAssignments>
        <object>Retool_Org__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_all_orgs_0_0_0</name>
        <label>Update all orgs</label>
        <locationX>4673</locationX>
        <locationY>597</locationY>
        <connector>
            <targetReference>Key_is_triaged</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Retool_License__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>$Record.Account__c</elementReference>
            </value>
        </inputAssignments>
        <object>Retool_Org__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_all_orgs_0_0_0_0</name>
        <label>Update all orgs to orphan orgs</label>
        <locationX>4977</locationX>
        <locationY>871</locationY>
        <connector>
            <targetReference>Key_is_triaged</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Retool_License__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <stringValue>0016e00002asz8xAAA</stringValue>
            </value>
        </inputAssignments>
        <object>Retool_Org__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_all_orgs_0_0_0_0_0</name>
        <label>Update all orgs</label>
        <locationX>1707</locationX>
        <locationY>460</locationY>
        <connector>
            <targetReference>Opp_is</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Retool_License__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>$Record.Partner_Relationship__r.Account__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Business_Unit__c</field>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
        </inputAssignments>
        <inputAssignments>
            <field>Partner_Relationship__c</field>
            <value>
                <elementReference>$Record.Partner_Relationship__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Partner</stringValue>
            </value>
        </inputAssignments>
        <object>Retool_Org__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_all_orgs_0_0_0_0_0_0</name>
        <label>Update all orgs</label>
        <locationX>1405</locationX>
        <locationY>867</locationY>
        <connector>
            <targetReference>Partner_Relationship_is</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Retool_License__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>$Record.Opportunity__r.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Business_Unit__c</field>
            <value>
                <elementReference>$Record.Opportunity__r.Business_Unit__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>$Record.Opportunity__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Partner_Relationship__c</field>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Customer</stringValue>
            </value>
        </inputAssignments>
        <object>Retool_Org__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Retool_License</name>
        <label>Update Retool License</label>
        <locationX>6152</locationX>
        <locationY>630</locationY>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>48</locationX>
        <locationY>571</locationY>
        <connector>
            <targetReference>Key_Type_is</targetReference>
        </connector>
        <object>Retool_License__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
</Flow>
